<!DOCTYPE html> <!-- Loric Informatique (page générée automatiquement à partir d'un document Word (version du modèle : 1.0)) -->
<html lang="fr-FR">
	<head>
		<title>Loric Informatique - Oracle Database (SQL)</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="robots" content="noindex, nofollow">
		<link rel="icon" href="../../images/icone.png">
		<link rel="stylesheet" href ="../../styles/style.css">
	</head>
	<body>
		<header>
			<script src="../../scripts/header.js"></script>
		</header>
		<main class="pageMemento">
			<section class="presentation">
				<div class="alignementVertical">
					<div>
						<h1>Mémento Oracle Database (SQL)</h1>
						<p class="version">Version 2.2 (créé le 10/08/2023, modifié le 30/09/2025)</p>
						<p><p class="zone-texte">SQL (Structured Query Language) est un langage servant à exploiter des bases de données relationnelles.<br/>Oracle Database est souvent utilisé pour les bases de données de sites web qui utilisent le langage PHP.<br/>Toutes les options facultatives sont représentées par des [ ].</p></p>
						<a href="Loric Informatique - Oracle Database (SQL).pdf"><button onclick="window.location.href = ''" class="telecharger">Télécharger</button></a>
						<a><button onclick="alert('Pour imprimer votre document, nous vous conseillons de choisir le format A4, de cocher Imprimer les arrière-plans et de décocher Imprimer les en-têtes et pieds de page.');print()" class="imprimer">Imprimer</button></a>
					</div>
					<img src="icone_oracledatabase.png" class="logoMemento"/>
				</div>
			</section>
			<section class="sommaire">
				<h2>Table des matières :</h2>
				<div class="tableDesMatieres">
					<!-- Table des matières remplie par le JavaScript -->
				</div>
			</section>
			<article>
				<h1 class="heading 1" id="1">Prise en main</h1><h2 class="heading 2" id="1.1">Outils nécessaires</h2><ul><li class="list paragraph"><a href="https://www.oracle.com/database/sqldeveloper/" target="_blank">SQL Developer</a> (contenant Oracle si vous avez un serveur simple hébergé)</li></ul><h1 class="heading 1" id="2">Bases</h1><h2 class="heading 2" id="2.1">Syntaxe</h2><p><span class="script"><i>requête</i></span><span class="script"><i>1;</i></span><span class="script"><br/><i>
requête2;</i></span><span class="script"><br/><i>
requête3;</i></span></p><h2 class="heading 2" id="2.2">Les variables</h2><h3 class="heading 3" id="2.2.1">Types de variables</h3><h4 class="heading 4" id="2.2.1.1">Numériques</h4><table><tr><td><p><span><b>Type</b></span></p></td><td><p><span><b>Limites</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">NUMBER</span><span class="script">(</span><span class="script"><i>X</i></span><span class="script">)</span></p></td><td><p>Longueur inférieure ou égale à <span><i>X</i></span> chiffres (maximum : 255)</p></td><td><p>Nombre entier</p></td></tr><tr><td><p><span class="script">NUMBER</span><span class="script">(</span><span class="script"><i>X</i></span><span class="script">,</span><span class="script"><i> Y</i></span><span class="script">)</span></p></td><td><p>Longueur inférieure ou égale à <span><i>X</i></span> chiffres dans la partie entière et inférieure ou égale à <span><i>Y</i></span> chiffres après la virgule (maximum : 255)</p></td><td><p>Nombre décimal</p></td></tr></table><h4 class="heading 4" id="2.2.1.2">Caractères</h4><table><tr><td><p><span><b>Type</b></span></p></td><td><p><span><b>Limites</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">CHAR(</span><span class="script"><i>X</i></span><span class="script">)</span></p></td><td><p>Longueur fixée à <span><i>X</i></span> caractères (maximum : 255)</p></td><td><p>Chaîne de caractères entre ' '</p></td></tr><tr><td><p><span class="script">VARCHAR</span><span class="script">2</span><span class="script">(</span><span class="script"><i>X</i></span><span class="script">)</span></p></td><td><p>Longueur inférieure ou égale à <span><i>X</i></span> caractères (maximum : 255)</p></td><td><p>Chaîne de caractères entre ' '</p></td></tr></table><h4 class="heading 4" id="2.2.1.3">Dates et heures</h4><table><tr><td><p><span><b>Type</b></span></p></td><td><p><span><b>Format</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">DATE</span></p></td><td><p><span class="script">DD/MM/YYYY</span></p></td><td><p>Date entre ' '</p></td></tr></table><h4 class="heading 4" id="2.2.1.4">Autres types</h4><table><tr><td><p><span><b>Type</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">BOOLEAN</span></p></td><td><p>Valeur pouvant être TRUE ou FALSE</p></td></tr></table><h2 class="heading 2" id="2.3">Commentaires</h2><p><span class="script">--</span><span class="script">Commentaire tenant sur une ligne</span></p><p><span class="script">/*</span><span class="script"><br/>
Commentaire pouvant être sur une ou plusieurs lignes</span><span class="script"><br/>
*/</span></p><h2 class="heading 2" id="2.4">Opérations mathématiques</h2><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">1 + 2</span></p></td><td><p>Renvoie 3</p></td></tr><tr><td><p><span class="script">3 - 1</span></p></td><td><p>Renvoie 2</p></td></tr><tr><td><p><span class="script">6 * 4</span></p></td><td><p>Renvoie 24</p></td></tr><tr><td><p><span class="script">5.0 / 2.0</span></p></td><td><p>Renvoie 2.5</p></td></tr><tr><td><p><span class="script">5 / 2</span></p></td><td><p>Renvoie 2 (le quotient sans décimal)</p></td></tr><tr><td><p><span class="script">'2' || '7'</span></p></td><td><p>Renvoie '27'</p></td></tr></table><h2 class="heading 2" id="2.5">Opérateurs de conditions</h2><table><tr><td><p><span><b>Condition</b></span></p></td><td><p><span><b>Description de ce que vérifie la condition</b></span></p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> = </span><span class="script"><i>b</i></span></p></td><td><p><span><i>a</i></span> égal à <span><i>b</i></span> (seulement en contenu : 1='1')</p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> &lt; </span><span class="script"><i>b</i></span></p></td><td><p><span><i>a</i></span> strictement inférieur à <span><i>b</i></span></p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> &gt; </span><span class="script"><i>b</i></span></p></td><td><p><span><i>a</i></span> strictement supérieur à <span><i>b</i></span></p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> &lt;= </span><span class="script"><i>b</i></span></p></td><td><p><span><i>a</i></span> supérieur ou égal à <span><i>b</i></span></p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> != </span><span class="script"><i>b</i></span></p></td><td><p><span><i>a</i></span> n’est pas égal à <span><i>b</i></span> (seulement en contenu : 1='1')</p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> </span><span class="script">&lt;&gt;</span><span class="script"> </span><span class="script"><i>b</i></span></p></td><td><p><span><i>a</i></span> n’est pas égal à <span><i>b</i></span> (seulement en contenu : 1='1')</p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> </span><span class="script">= ALL</span><span class="script"> </span><span class="script"><i>b</i></span></p></td><td><p><span><i>a</i></span> est égale à toutes les valeurs dans <span><i>b</i></span> (qui peut être une sous-requête ou une liste sous forme : <span class="script">(</span><span class="script"><i>val1</i></span><span class="script">, </span><span class="script"><i>val2</i></span><span class="script">…)</span>)</p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> </span><span class="script">= ANY</span><span class="script"> </span><span class="script"><i>b</i></span></p></td><td><p><span><i>a</i></span> est égale à au moins une valeur dans <span><i>b</i></span> (qui peut être une sous-requête ou une liste sous forme : <span class="script">(</span><span class="script"><i>val1</i></span><span class="script">, </span><span class="script"><i>val2</i></span><span class="script">…)</span>)</p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> </span><span class="script">IN</span><span class="script"> </span><span class="script"><i>b</i></span></p></td><td><p><span><i>a</i></span> est présent dans <span><i>b</i></span> (qui peut être une sous-requête ou une liste sous forme : <span class="script">(</span><span class="script"><i>val1</i></span><span class="script">, </span><span class="script"><i>val2</i></span><span class="script">…)</span>)</p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"><i> </i></span><span class="script">BETWEEN </span><span class="script"><i>b</i></span><span class="script"> AND </span><span class="script"><i>c</i></span></p></td><td><p><span><i>a</i></span><span><i> </i></span>est compris entre <span><i>b</i></span> et <span><i>c</i></span></p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> LIKE '</span><span class="script"><i>SousChaine</i></span><span class="script">'</span></p></td><td><p><span><i>a</i></span><span><i> </i></span>contient la sous-chaîne (avec _ correspondant à 1 caractère et % correspondant à 0 ou plusieurs caractères)</p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> </span><span class="script">IS [NOT]</span><span class="script"> </span><span class="script">NULL</span></p></td><td><p>Tester si une variable est nulle</p></td></tr><tr><td><p><span class="script"><i>a</i></span><span class="script"> </span><span class="script">IS [NOT]</span><span class="script"> </span><span class="script">UNKNOWN</span></p></td><td><p>Tester si une variable est définie</p></td></tr><tr><td><p><span class="script">OR</span></p></td><td><p>À mettre entre deux conditions, permet d’avoir une des deux conditions qui doit être vraie</p></td></tr><tr><td><p><span class="script">AND</span></p></td><td><p>À mettre entre deux conditions, permet d’avoir deux conditions qui doivent être vraie</p></td></tr><tr><td><p><span class="script">NOT </span><span class="script"><i>condition</i></span></p></td><td><p>Ne doit pas respecter la condition</p></td></tr></table><h1 class="heading 1" id="3">Les fonctions</h1><h2 class="heading 2" id="3.1">Les fonctions arithmétiques</h2><table><tr><td><p><span><b>Fonction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">ROUND(</span><span class="script"><i>n</i></span><span class="script">, </span><span class="script"><i>d</i></span><span class="script">)</span></p></td><td><p>Arrondit <span><i>n</i></span> au réel à <span><i>d</i></span> chiffres après la virgule ou à l’entier si <span><i>d</i></span> n’est pas renseigné</p></td></tr><tr><td><p><span class="script">TRUNC(</span><span class="script"><i>n</i></span><span class="script">, </span><span class="script"><i>d</i></span><span class="script">)</span></p></td><td><p>Tronque <span><i>n</i></span> à <span><i>d</i></span> chiffres après la virgule ou à 0 si <span><i>d</i></span> n’est pas renseigné</p></td></tr><tr><td><p><span class="script">POWER(</span><span class="script"><i>n</i></span><span class="script">, </span><span class="script"><i>m</i></span><span class="script">)</span></p></td><td><p>Renvoie <span><i>n</i></span> à la puissance <span><i>m</i></span> (si <span><i>n</i></span> est négatif, <span><i>m</i></span> doit être un entier)</p></td></tr><tr><td><p><span class="script">CEIL(</span><span class="script"><i>n</i></span><span class="script">)</span></p></td><td><p>Renvoie un entier directement supérieur ou égal à <span><i>n</i></span></p></td></tr><tr><td><p><span class="script">FLOOR(</span><span class="script"><i>n</i></span><span class="script">)</span></p></td><td><p>Renvoie un entier directement supérieur ou égal à <span><i>n</i></span> (partie entière de <span><i>n</i></span>)</p></td></tr><tr><td><p><span class="script">ABS(</span><span class="script"><i>n</i></span><span class="script">)</span></p></td><td><p>Renvoie la valeur absolue de <span><i>n</i></span></p></td></tr><tr><td><p><span class="script">MOD(</span><span class="script"><i>n</i></span><span class="script">, </span><span class="script"><i>m</i></span><span class="script">)</span></p></td><td><p>Renvoie le reste de la division de <span><i>n</i></span> par <span><i>m</i></span></p></td></tr><tr><td><p><span class="script">SQRT(</span><span class="script"><i>n</i></span><span class="script">)</span></p></td><td><p>Renvoie la racine carrée</p></td></tr><tr><td><p><span class="script">SIGN(</span><span class="script"><i>n</i></span><span class="script">)</span></p></td><td><p>Renvoie -1 si <span><i>n</i></span> est négatif, 1 si <span><i>n</i></span> est positif et 0 si <span><i>n</i></span> égal à 0</p></td></tr></table><h2 class="heading 2" id="3.2">Les fonctions pour les chaînes de caractères</h2><table><tr><td><p><span><b>Fonction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">LENGTH(</span><span class="script"><i>chaine</i></span><span class="script">)</span></p></td><td><p>Renvoie la longueur de la chaine</p></td></tr><tr><td><p><span class="script">SUBSTR(</span><span class="script"><i>chaine</i></span><span class="script">, </span><span class="script"><i>debut</i></span><span class="script">[, </span><span class="script"><i>longueur</i></span><span class="script">])</span></p></td><td><p>Renvoie la position (en commençant à une certaine position et allant jusqu'à la longueur fixée ou à la fin)</p></td></tr><tr><td><p><span class="script">UPPER(</span><span class="script"><i>chaine</i></span><span class="script">)</span></p></td><td><p>Convertit en majuscule</p></td></tr><tr><td><p><span class="script">LOWER(</span><span class="script"><i>chaine</i></span><span class="script">)</span></p></td><td><p>Convertit en minuscule</p></td></tr><tr><td><p><span class="script">INITCAP(</span><span class="script"><i>chaine</i></span><span class="script">)</span></p></td><td><p>Met en majuscule la première lettre et en minuscule les autres</p></td></tr><tr><td><p><span class="script">TRANSLATE(</span><span class="script"><i>chaine</i></span><span class="script">, </span><span class="script"><i>c1</i></span><span class="script">, </span><span class="script"><i>c2</i></span><span class="script">)</span></p></td><td><p>Remplace chaque caractère <span><i>c1</i></span> par <span><i>c2</i></span> dans la chaîne</p></td></tr><tr><td><p><span class="script">REPLACE(</span><span class="script"><i>chaine</i></span><span class="script">, </span><span class="script"><i>ch1</i></span><span class="script">, </span><span class="script"><i>ch2</i></span><span class="script">)</span></p></td><td><p>Remplace chaque chaine <span><i>ch1</i></span> par <span><i>ch2</i></span> dans la chaîne</p></td></tr></table><h2 class="heading 2" id="3.3">Les fonctions pour les dates</h2><h3 class="heading 3" id="3.3.1">Les masques pour les dates</h3><table><tr><td><p><span><b>Masque</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">'CC'</span></p></td><td><p>Siècle (ex : 21)</p></td></tr><tr><td><p><span class="script">'YYYY'</span></p></td><td><p>Année (ex : 2024)</p></td></tr><tr><td><p><span class="script">'Q'</span></p></td><td><p>Numéro du trimestre dans l’année (ex : 3)</p></td></tr><tr><td><p><span class="script">'WW'</span></p></td><td><p>Numéro de la semaine dans l’année</p></td></tr><tr><td><p><span class="script">'MM'</span></p></td><td><p>Numéro du mois (ex : 05)</p></td></tr><tr><td><p><span class="script">'DDD'</span></p></td><td><p>Numéro du jour dans l’année (ex : 185)</p></td></tr><tr><td><p><span class="script">'DD'</span></p></td><td><p>Numéro du jour dans le mois (ex : 08)</p></td></tr><tr><td><p><span class="script">'D'</span></p></td><td><p>Numéro du jour dans la semaine (ex : 5) avec dimanche égal à 0</p></td></tr><tr><td><p><span class="script">'HH' </span>ou<span class="script"> 'HH12'</span></p></td><td><p>Heure sur 12 heures (ex : 09)</p></td></tr><tr><td><p><span class="script">'HH24'</span></p></td><td><p>Heure sur 24 heures (ex : 21)</p></td></tr><tr><td><p><span class="script">'MI'</span></p></td><td><p>Minutes (ex : 05)</p></td></tr><tr><td><p><span class="script">'S'</span></p></td><td><p>Secondes (ex : 30)</p></td></tr><tr><td><p><span class="script">'YEAR'</span></p></td><td><p>Année en lettres</p></td></tr><tr><td><p><span class="script">'MONTH'</span></p></td><td><p>Mois en lettres</p></td></tr><tr><td><p><span class="script">'MON'</span></p></td><td><p>Mois abrégé (3 lettres)</p></td></tr><tr><td><p><span class="script">'DAY'</span></p></td><td><p>Jour en lettres</p></td></tr><tr><td><p><span class="script">'DY'</span></p></td><td><p>Jour abrégé (3 lettres)</p></td></tr></table><h3 class="heading 3" id="3.3.2">Les fonctions de manipulation des dates</h3><table><tr><td><p><span><b>Fonction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">SYSDATE</span><span class="script"> </span>ou<span class="script"> </span><span class="script">CURRENT_DATE</span></p></td><td><p>Renvoie la date actuelle</p></td></tr><tr><td><p><span class="script">CURRENT_TIMESTAMP</span><span class="script"> </span>ou<span class="script"> </span><span class="script">SYSTIMESTAMP</span></p></td><td><p>Renvoie la date et l'heure actuelle</p></td></tr><tr><td><p><span class="script">ADD_</span><span class="script">MONTHS(</span><span class="script"><i>date</i></span><span class="script">, </span><span class="script"><i>nombre</i></span><span class="script">)</span></p></td><td><p>Ajoute ou soustrait un certain nombre de mois</p></td></tr><tr><td><p><span class="script">LAST_</span><span class="script">DAY(</span><span class="script"><i>date</i></span><span class="script">)</span></p></td><td><p>Expression de type date qui a pour valeur la date du dernier jour du mois contenant la date</p></td></tr><tr><td><p><span class="script">NEXT_</span><span class="script">DAY(</span><span class="script"><i>date</i></span><span class="script">, </span><span class="script"><i>jour</i></span><span class="script">)</span></p></td><td><p>Expression de type date qui a pour valeur la date du prochain jour de la semaine spécifié dans le jour</p></td></tr><tr><td><p><span class="script">ROUND(</span><span class="script"><i>date</i></span><span class="script">, </span><span class="script"><i>masque</i></span><span class="script">)</span></p></td><td><p>Arrondit la date à la précision spécifiée</p></td></tr><tr><td><p><span class="script">TRUNC(</span><span class="script"><i>date</i></span><span class="script">, </span><span class="script"><i>masque</i></span><span class="script">)</span></p></td><td><p>Tronque la date à la précision spécifiée</p></td></tr><tr><td><p><span class="script">EXTRACT(</span><span class="script">DAY FROM </span><span class="script"><i>date</i></span><span class="script">)</span></p></td><td><p>Extrait le jour à partir d’une date</p></td></tr><tr><td><p><span class="script">EXTRACT(</span><span class="script">MONTH FROM </span><span class="script"><i>date</i></span><span class="script">)</span></p></td><td><p>Extrait le mois à partir d’une date</p></td></tr><tr><td><p><span class="script">EXTRACT(</span><span class="script">YEAR FROM </span><span class="script"><i>date</i></span><span class="script">)</span></p></td><td><p>Extrait l’année à partir d’une date</p></td></tr><tr><td><p><span class="script">TO_</span><span class="script">DATE(</span><span class="script"><i>chaine</i></span><span class="script">, </span><span class="script"><i>masque</i></span><span class="script">)</span></p></td><td><p>Convertit une chaîne de caractères en date (ex : <span class="script">TO_</span><span class="script">DATE(</span><span class="script">'10/12/2024', 'DD/MM/YYYY'</span><span class="script">)</span>)</p></td></tr><tr><td><p><span class="script">TO_</span><span class="script">CHAR</span><span class="script">(</span><span class="script"><i>date</i></span><span class="script">, </span><span class="script"><i>masque</i></span><span class="script">)</span></p></td><td><p>Convertit une date en chaîne de caractères (ex : <span class="script">TO_</span><span class="script">CHAR</span><span class="script">(</span><span class="script">SYSDATE</span><span class="script">, 'DD/MM/YYYY'</span><span class="script">)</span>)</p></td></tr></table><h2 class="heading 2" id="3.4">Autres fonctions</h2><table><tr><td><p><span><b>Fonction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">CHR(</span><span class="script"><i>n</i></span><span class="script">)</span></p></td><td><p>Retourne le caractère dont le code (ASCII ou EBCDIC) est égal à l’expression numérique entré en paramètre</p></td></tr><tr><td><p><span class="script">GREATEST(</span><span class="script"><i>exp1</i></span><span class="script">, </span><span class="script"><i>exp2</i></span><span class="script">…)</span></p></td><td><p>Retourne la plus grande des valeurs des expressions arguments</p></td></tr><tr><td><p><span class="script">LEAST(</span><span class="script"><i>exp1</i></span><span class="script">, </span><span class="script"><i>exp2</i></span><span class="script">…)</span></p></td><td><p>Retourne la plus petite des valeurs des expressions arguments</p></td></tr><tr><td><p><span class="script">COALESCE(</span><span class="script"><i>exp1</i></span><span class="script">, </span><span class="script"><i>exp2</i></span><span class="script">…)</span></p></td><td><p>Retourne la première valeur différente de NULL des expressions arguments, s’il y en a une, et la valeur NULL s’il n’y en a pas</p></td></tr></table><h2 class="heading 2" id="3.5">Les fonctions d'agrégat (pour des sélections uniquement, ne concernent pas les conditions)</h2><table><tr><td><p><span><b>Fonction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">AVG(</span><span class="script"><i>expression</i></span><span class="script">)</span></p></td><td><p>Moyenne des valeurs d’une colonne</p></td></tr><tr><td><p><span class="script">SUM(</span><span class="script"><i>expression</i></span><span class="script">)</span></p></td><td><p>Somme des valeurs d’une colonne</p></td></tr><tr><td><p><span class="script">MIN(</span><span class="script"><i>expression</i></span><span class="script">)</span></p></td><td><p>La plus petite des valeurs d’une colonne</p></td></tr><tr><td><p><span class="script">VARIANCE(</span><span class="script"><i>expression</i></span><span class="script">)</span></p></td><td><p>La plus grande des valeurs d’une colonne</p></td></tr><tr><td><p><span class="script">STDDEV(</span><span class="script"><i>expression</i></span><span class="script">)</span></p></td><td><p>Écart-type ou déviation standard</p></td></tr><tr><td><p><span class="script">COUNT(</span><span class="script">*)</span></p></td><td><p>Nombre de lignes</p></td></tr><tr><td><p><span class="script">COUNT(</span><span class="script"><i>expression</i></span><span class="script">)</span></p></td><td><p>Nombre de lignes ayant pour valeur non nulle</p></td></tr><tr><td><p><span class="script">COUNT(</span><span class="script">DISTINCT </span><span class="script"><i>expression</i></span><span class="script">)</span></p></td><td><p>Nombre de lignes ayant des valeurs distinctes non nulles</p></td></tr></table><h1 class="heading 1" id="4">Requêtes d’initialisation de la base de données</h1><h2 class="heading 2" id="4.1">Créer une table (tableau de valeurs)</h2><p><span class="script">CREATE TABLE [IF NOT EXISTS] </span><span class="script"><i>table1</i></span><span class="script"> (</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>attribut1</i></span><span class="script"> </span><span class="script"><i>type1</i></span><span class="script"> [[CONSTRAINT </span><span class="script"><i>nomContrainte1</i></span><span class="script">] </span><span class="script"><i>contrainte1</i></span><span class="script">] [GENERATED AS IDENTITY],</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>attribut2</i></span><span class="script"> </span><span class="script"><i>type2</i></span><span class="script"> [[CONSTRAINT </span><span class="script"><i>nomContrainte2</i></span><span class="script">] </span><span class="script"><i>contrainte2</i></span><span class="script">],</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>attribut3</i></span><span class="script"> </span><span class="script"><i>type3</i></span><span class="script"> [[CONSTRAINT </span><span class="script"><i>nomContrainte3</i></span><span class="script">] </span><span class="script"><i>contrainte3</i></span><span class="script">],</span><span class="script"><br/>
 </span><span class="script">   [</span><span class="script">CONSTRAINT </span><span class="script"><i>nomContrainte4</i></span><span class="script">] PRIMARY KEY (</span><span class="script"><i>attribut1</i></span><span class="script">),</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[[CONSTRAINT </span><span class="script"><i>nomContrainte5</i></span><span class="script">] FOREIGN KEY (</span><span class="script"><i>attribut3</i></span><span class="script">) REFERENCES </span><span class="script"><i>table2</i></span><span class="script">(</span><span class="script"><i>attribut1</i></span><span class="script">)]</span><span class="script"><br/>
); </span></p><p>ou</p><p><span class="script">CREATE TABLE </span><span class="script"><i>table1</i></span><span class="script"> (</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>attribut1</i></span><span class="script"> </span><span class="script"><i>type1</i></span><span class="script"> [CONSTRAINT </span><span class="script"><i>nomContrainte1</i></span><span class="script">] PRIMARY KEY [GENERATED AS IDENTITY],</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>attribut2</i></span><span class="script"> </span><span class="script"><i>type2</i></span><span class="script"> [[CONSTRAINT </span><span class="script"><i>nomContrainte2</i></span><span class="script">] </span><span class="script"><i>contrainte2</i></span><span class="script">],</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>attribut3</i></span><span class="script"> </span><span class="script"><i>type3</i></span><span class="script"> [[CONSTRAINT </span><span class="script"><i>nomContrainte3</i></span><span class="script">] REFERENCES </span><span class="script"><i>table2</i></span><span class="script">(</span><span class="script"><i>attribut1</i></span><span class="script">)]</span><span class="script"><br/>
</span><span class="script">);</span></p><p class="note"><span class="script">GENERATED AS IDENTITY</span> permet de créer automatiquement les valeurs des clés primaires si le type est un nombre entier.</p><p><br/></p><h2 class="heading 2" id="4.2">Les contraintes</h2><h3 class="heading 3" id="4.2.1">Liste des contraintes</h3><table><tr><td><p><span><b>Contrainte</b></span></p></td><td><p><span><b>Initiales nom contrainte</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">NOT NULL</span></p></td><td><p><span class="script"><i>nn</i></span><span class="script"><i>_nomContrainte</i></span></p></td><td><p>Permet de rendre obligatoire l’entrée d’une valeur dans un attribut</p></td></tr><tr><td><p><span class="script">CHECK(</span><span class="script"><i>condition</i></span><span class="script">)</span></p></td><td><p><span class="script"><i>ck</i></span><span class="script"><i>_nomContrainte</i></span></p></td><td><p>Permet de vérifier la condition avant d'insérer un enregistrement</p></td></tr><tr><td><p><span class="script">UNIQUE</span></p></td><td><p><span class="script"><i>uq</i></span><span class="script"><i>_nomContrainte</i></span></p></td><td><p>Permet d'éviter l'insertion de plusieurs valeurs identiques</p></td></tr><tr><td><p><span class="script">DEFAULT </span><span class="script"><i>valeurParDefaut</i></span></p></td><td><p><span class="script"><i>df</i></span><span class="script"><i>_nomContrainte</i></span></p></td><td><p>Permet de remplacer une valeur non renseignée par une autre</p></td></tr><tr><td><p><span class="script">PRIMARY KEY (</span><span class="script"><i>attribut1</i></span><span class="script">)</span></p></td><td><p><span class="script"><i>pk</i></span><span class="script"><i>_nomContrainte</i></span></p></td><td><p>Permet de créer une clé primaire. Il s'agit généralement d'un identifiant, et sa valeur est unique</p></td></tr><tr><td><p><span class="script">FOREIGN KEY (</span><span class="script"><i>attribut3</i></span><span class="script">) REFERENCES </span><span class="script"><i>table2</i></span><span class="script">(</span><span class="script"><i>attribut7</i></span><span class="script">)</span></p></td><td><p><span class="script"><i>fk</i></span><span class="script"><i>_nomContrainte</i></span></p></td><td><p>Permet de créer une clé étrangère en relation avec une autre table (déjà existante)</p></td></tr></table><h3 class="heading 3" id="4.2.2">Ajouter une contrainte</h3><p><span class="script">ALTER TABLE </span><span class="script"><i>table1</i></span><span class="script"><br/>
ADD CONSTRAINT</span><span class="script"> </span><span class="script"><i>nomContrainte1</i></span><span class="script"> </span><span class="script"><i>contrainte</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><p class="note">Il est fortement conseillé d'ajouter une contrainte en même temps que la création d'une table. Ces commandes peuvent être utile si une contrainte a été oubliée ou n'aurait pas dû être insérée.</p><h3 class="heading 3" id="4.2.3">Supprimer une contrainte</h3><p><span class="script">ALTER TABLE </span><span class="script"><i>table1</i></span><span class="script"><br/>
DROP CONSTRAINT</span><span class="script"> </span><span class="script"><i>nomContrainte</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><h3 class="heading 3" id="4.2.4">Activer une contrainte d'intégrité</h3><p><span class="script">ALTER TABLE </span><span class="script"><i>table1</i></span><span class="script"><br/>
ENABLE</span><span class="script"> </span><span class="script"><i>nomContrainte</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><h3 class="heading 3" id="4.2.5">Désactiver une contrainte d'intégrité</h3><p><span class="script">ALTER TABLE </span><span class="script"><i>table1</i></span><span class="script"><br/>
DISABLE</span><span class="script"> </span><span class="script"><i>nomContrainte</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><h2 class="heading 2" id="4.3">Copier une table</h2><p><span class="script">CREATE TABLE </span><span class="script"><i>table2</i></span><span class="script"> AS (SELECT * FROM </span><span class="script"><i>table1</i></span><span class="script">);</span></p><h2 class="heading 2" id="4.4">Renommer une table</h2><p><span class="script">RENAME </span><span class="script"><i>ancienNom</i></span><span class="script"> TO </span><span class="script"><i>nouveauNom</i></span><span class="script">;</span></p><h2 class="heading 2" id="4.5">Supprimer une table</h2><p><span class="script">DROP TABLE [IF EXISTS] </span><span class="script"><i>table1</i></span><span class="script"> [CASCADE CONSTRAINTS</span><span class="script">];</span></p><h1 class="heading 1" id="5">Requêtes de mise à jour du contenu de la table</h1><h2 class="heading 2" id="5.1">Insérer un ou plusieurs enregistrement (ligne)</h2><p><span class="script">INSERT INTO </span><span class="script"><i>table1</i></span><span class="script"> [(</span><span class="script"><i>attribut1</i></span><span class="script">, </span><span class="script"><i>attribut2</i></span><span class="script">…)] VALUES</span><span class="script"><br/>
</span><span class="script">(</span><span class="script"><i>valeur1</i></span><span class="script">, </span><span class="script"><i>valeur2</i></span><span class="script">…</span><span class="script">);</span></p><h2 class="heading 2" id="5.2">Mettre à jour un ou plusieurs enregistrement(s)respectant la condition</h2><p><span class="script">UPDATE </span><span class="script"><i>table1</i></span><span class="script"><br/>
SET </span><span class="script"><i>attribut1</i></span><span class="script"> = </span><span class="script"><i>valeur1</i></span><span class="script"> [, </span><span class="script"><i>attribut2</i></span><span class="script"> = </span><span class="script"><i>valeur2</i></span><span class="script">…]</span><span class="script"><br/>
WHERE </span><span class="script"><i>condition</i></span><span class="script">;</span></p><h2 class="heading 2" id="5.3">Supprimer un ou plusieurs enregistrement(s)respectant la condition</h2><p><span class="script">DELETE FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
WHERE </span><span class="script"><i>condition</i></span><span class="script">;</span></p><h1 class="heading 1" id="6">Requêtes de mise à jour de la structure de la table</h1><h2 class="heading 2" id="6.1">Ajouter une colonne</h2><p><span class="script">ALTER TABLE </span><span class="script"><i>table1</i></span><span class="script"><br/>
ADD </span><span class="script"><i>attribut</i></span><span class="script"> </span><span class="script"><i>type</i></span><span class="script">;</span></p><h2 class="heading 2" id="6.2">Supprimer une colonne</h2><p><span class="script">ALTER TABLE </span><span class="script"><i>table1</i></span><span class="script"><br/>
DROP [COLUMN] </span><span class="script"><i>attribut</i></span><span class="script">;</span></p><h2 class="heading 2" id="6.3">Modifier le type d'une colonne</h2><p><span class="script">ALTER TABLE </span><span class="script"><i>table1</i></span><span class="script"><br/>
MODIFY </span><span class="script">attribut </span><span class="script"><i>nouveauType</i></span><span class="script">;</span></p><h2 class="heading 2" id="6.4">Modifier le nom d'une colonne</h2><p><span class="script">ALTER TABLE </span><span class="script"><i>table1</i></span><span class="script"><br/>
RENAME </span><span class="script"><i>ancienNom</i></span><span class="script"> TO </span><span class="script"><i>nouveauNom</i></span><span class="script">;</span></p><h1 class="heading 1" id="7">Requêtes de sélection de données</h1><h2 class="heading 2" id="7.1">Syntaxe de base</h2><p><span class="script">SELECT </span><span class="script"><i>attribut1</i></span><span class="script">, </span><span class="script"><i>attribut2</i></span><span class="script">… FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">[</span><span class="script">WHERE </span><span class="script"><i>condition1</i></span><span class="script">]</span><span class="script"><br/>
[</span><span class="script">GROUP BY </span><span class="script"><i>attribut1</i></span><span class="script"> [, </span><span class="script"><i>attribut2</i></span><span class="script">…]</span><span class="script"><br/>
</span><span class="script">[HAVING </span><span class="script"><i>condition2</i></span><span class="script">]</span><span class="script">]</span><span class="script"><br/>
</span><span class="script">[ORDER BY </span><span class="script"><i>attribut1</i></span><span class="script"> [DESC], </span><span class="script"><i>attribut2</i></span><span class="script"> [DESC]…</span><span class="script">];</span></p><h2 class="heading 2" id="7.2">La clause SELECT</h2><h3 class="heading 3" id="7.2.1">Sélection de tous les enregistrements de la table</h3><p><span class="script">SELECT * FROM </span><span class="script"><i>table</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><h3 class="heading 3" id="7.2.2">Sélection de certains attributs de la table</h3><p><span class="script">SELECT </span><span class="script"><i>attribut1</i></span><span class="script">, </span><span class="script"><i>attribut2</i></span><span class="script"> FROM </span><span class="script"><i>table</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><h3 class="heading 3" id="7.2.3">Sélection d’un attribut de la table sans répétitions</h3><p><span class="script">SELECT</span><span class="script"> DISTINCT</span><span class="script"> </span><span class="script"><i>attribut1</i></span><span class="script"> FROM </span><span class="script"><i>table</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><h3 class="heading 3" id="7.2.4">Utilisation d'une fonction d'agrégat (ne renvoie qu’une seule valeur sans regroupement)</h3><p><span class="script">SELECT </span><span class="script"><i>maFonction</i></span><span class="script">(</span><span class="script"><i>attribut1</i></span><span class="script">) FROM table</span><span class="script">1;</span></p><p><span class="script"><br/></span></p><ul><li class="list paragraph"><span style="font-family:Poppins SemiBold;">Sélection des </span><span style="font-family:Poppins SemiBold;"><i>n</i></span><span style="font-family:Poppins SemiBold;"> premiers enregistrements de la table</span></li></ul><p><span class="script">SELECT * FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">[ORDER BY </span><span class="script"><i>attribut1</i></span><span class="script"> [DESC], </span><span class="script"><i>attribut2</i></span><span class="script"> [DESC]…]</span><span class="script"><br/>
</span><span class="script">FETCH FIRST </span><span class="script"><i>n</i></span><span class="script"> ROW[S] </span><span class="script">ONLY;</span></p><h3 class="heading 3" id="7.2.5">Sélection des colonnes en fonction de la valeur d’une colonne</h3><p><span class="script">SELECT CASE </span><span class="script"><i>colonne0</i></span><span class="script"><br/>
</span><span class="script">&nbsp;&nbsp;&nbsp;&nbsp;WHEN </span><span class="script"><i>valeur1</i></span><span class="script"> THEN </span><span class="script"><i>colonne1</i></span><span class="script"><br/>
</span><span class="script">&nbsp;&nbsp;&nbsp;&nbsp;WHEN </span><span class="script"><i>valeur2</i></span><span class="script"> THEN </span><span class="script"><i>colonne2</i></span><span class="script"><br/>
</span><span class="script">&nbsp;&nbsp;&nbsp;&nbsp;…</span><span class="script"><br/>
</span><span class="script"> </span><span class="script">   [</span><span class="script">ELSE </span><span class="script"><i>colonne3</i></span><span class="script">]</span><span class="script"><br/>
</span><span class="script">END</span><span class="script"> AS </span><span class="script"><i>nomColonne</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span></p><h2 class="heading 2" id="7.3">Les jointures (clause JOIN)</h2><p>Les jointures permettent de sélectionner des attributs de plusieurs tables différentes (les jointures peuvent s’accumuler).</p><h3 class="heading 3" id="7.3.1">Syntaxe de base</h3><p><span class="script">SELECT * FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
JOIN </span><span class="script"><i>table2</i></span><span class="script"> ON </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut</i></span><span class="script"> = </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut</i></span><span class="script"><br/>
</span><span class="script">[</span><span class="script">JOIN </span><span class="script"><i>table3</i></span><span class="script"> ON </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut</i></span><span class="script"> = </span><span class="script"><i>table3</i></span><span class="script">.</span><span class="script"><i>attribut</i></span><span class="script"><br/>
…</span><span class="script">]</span><span class="script"><br/>
</span><span class="script">[</span><span class="script">WHERE </span><span class="script"><i>condition</i></span><span class="script">];</span></p><h3 class="heading 3" id="7.3.2">Jointure interne simple</h3><p><span class="script">SELECT </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut2</i></span><span class="script">, </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut3</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">[INNER] JOIN </span><span class="script"><i>table2</i></span><span class="script"> ON </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script"> = </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut</i></span><span class="script"><i>4</i></span><span class="script">;</span></p><p>Autre solution (à utiliser uniquement pour deux attributs identiques de deux tables différentes) :</p><p><span class="script">SELECT </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut2</i></span><span class="script">, </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut3</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">[INNER] JOIN </span><span class="script"><i>table2</i></span><span class="script"> </span><span class="script">USING(</span><span class="script"><i>attribut1</i></span><span class="script">);</span></p><h3 class="heading 3" id="7.3.3">Jointure externe gauche (avec des enregistrements de la table de gauche non présents dans la table de droite)</h3><p><span class="script">SELECT </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script">, </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut3</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
LEFT [OUTER] JOIN </span><span class="script"><i>table2</i></span><span class="script"> ON </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script"> = </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut</i></span><span class="script"><i>2</i></span><span class="script">;</span></p><h3 class="heading 3" id="7.3.4">Jointure externe droite (avec des enregistrements de la table de droite non présents dans la table de gauche)</h3><p><span class="script">SELECT </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script">, </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut3</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">RIGHT [OUTER] JOIN </span><span class="script"><i>table2</i></span><span class="script"> ON </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script"> = </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut</i></span><span class="script"><i>2</i></span><span class="script">;</span></p><h3 class="heading 3" id="7.3.5">Jointure externe entière (avec des tous les enregistrements non présents dans une autre table)</h3><p><span class="script">SELECT </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script">, </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut3</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">FULL [OUTER] JOIN </span><span class="script"><i>table2</i></span><span class="script"> ON </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script"> = </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut</i></span><span class="script"><i>2</i></span><span class="script">;</span></p><h3 class="heading 3" id="7.3.6">Jointure naturelle (pour deux tables avec une colonne du même nom)</h3><p><span class="script">SELECT </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script">, </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut3</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">NATURAL JOIN </span><span class="script"><i>table</i></span><span class="script"><i>2</i></span><span class="script">;</span></p><h3 class="heading 3" id="7.3.7">Produit cartésien (retourne chaque ligne d'une table avec chaque ligne d'une autre table)</h3><p><span class="script">SELECT </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script">, </span><span class="script"><i>table2</i></span><span class="script">.</span><span class="script"><i>attribut3</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">CROSS JOIN </span><span class="script"><i>table</i></span><span class="script"><i>2</i></span><span class="script">;</span></p><h2 class="heading 2" id="7.4">Les alias</h2><h3 class="heading 3" id="7.4.1">Alias sur les tables (pour faciliter les jointures)</h3><p><span class="script">SELECT </span><span class="script"><i>t</i></span><span class="script"><i>1</i></span><span class="script">.</span><span class="script"><i>attribut</i></span><span class="script"><i>2</i></span><span class="script">, </span><span class="script"><i>t2</i></span><span class="script">.</span><span class="script"><i>attribut3</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"> </span><span class="script"><i>t1</i></span><span class="script"><br/>
</span><span class="script">JOIN </span><span class="script"><i>table2</i></span><span class="script"> </span><span class="script"><i>t2</i></span><span class="script"> ON </span><span class="script"><i>t1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script"> = </span><span class="script"><i>t2</i></span><span class="script">.</span><span class="script"><i>attribut4</i></span><span class="script">;</span></p><h3 class="heading 3" id="7.4.2">Alias sur une fonction d'agrégat (pour nommer une colonne sans nom ou renommer une colonne)</h3><p><span class="script">SELECT </span><span class="script"><i>maFonction</i></span><span class="script">(</span><span class="script"><i>attribut1</i></span><span class="script">) [AS] </span><span class="script"><i>nomColonne</i></span><span class="script"> FROM </span><span class="script"><i>table</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><h2 class="heading 2" id="7.5">La clause WHERE</h2><h3 class="heading 3" id="7.5.1">Sélection des enregistrements de la table respectant la condition</h3><p><span class="script">SELECT * FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">WHERE </span><span class="script"><i>condition</i></span><span class="script">;</span></p><h2 class="heading 2" id="7.6">Les clauses GROUP BY et HAVING</h2><h3 class="heading 3" id="7.6.1">Utilisation d’une fonction d’agrégat sur chaque groupe d’enregistrements de même(s) attribut(s)</h3><p><span class="script">SELECT </span><span class="script"><i>maFonction</i></span><span class="script">(</span><span class="script"><i>attribut1</i></span><span class="script">), </span><span class="script"><i>attribut2</i></span><span class="script">, </span><span class="script"><i>attribut3</i></span><span class="script">… FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">GROUP BY </span><span class="script"><i>attribut2</i></span><span class="script">, </span><span class="script"><i>attribut3</i></span><span class="script">…;</span></p><h3 class="heading 3" id="7.6.2">Utilisation d’une fonction d’agrégat sur chaque groupe d’enregistrements de même(s) attribut(s) avec une condition avant et après regroupement</h3><p><span class="script">SELECT </span><span class="script"><i>maFonction</i></span><span class="script">(</span><span class="script"><i>attribut1</i></span><span class="script">), </span><span class="script"><i>attribut2</i></span><span class="script">, </span><span class="script"><i>attribut3</i></span><span class="script">… FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">WHERE </span><span class="script"><i>conditionAvantRegroupement</i></span><span class="script"><br/>
</span><span class="script">GROUP BY </span><span class="script"><i>attribut2</i></span><span class="script">, </span><span class="script"><i>attribut3</i></span><span class="script">…</span><span class="script"><br/>
</span><span class="script">HAVING </span><span class="script"><i>conditionApresRegroupement</i></span><span class="script">;</span></p><h2 class="heading 2" id="7.7">La clause ORDER BY</h2><h3 class="heading 3" id="7.7.1">Sélection des enregistrements de la table dans l’ordre croissant</h3><p><span class="script">SELECT * FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">[WHERE </span><span class="script"><i>condition</i></span><span class="script">]</span><span class="script"><br/>
</span><span class="script">ORDER BY </span><span class="script"><i>attribut1</i></span><span class="script"> [</span><span class="script">ASC</span><span class="script">]</span><span class="script">[</span><span class="script">, </span><span class="script"><i>attribut2</i></span><span class="script"> [</span><span class="script">ASC</span><span class="script">]…</span><span class="script">]</span><span class="script">;</span></p><h3 class="heading 3" id="7.7.2">Sélection des enregistrements de la table dans l’ordre décroissant</h3><p><span class="script">SELECT * FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">[WHERE </span><span class="script"><i>condition</i></span><span class="script">]</span><span class="script"><br/>
</span><span class="script">ORDER BY </span><span class="script"><i>attribut1</i></span><span class="script"> </span><span class="script">DESC[</span><span class="script">, </span><span class="script"><i>attribut2</i></span><span class="script"> </span><span class="script">DESC</span><span class="script">…</span><span class="script">]</span><span class="script">;</span></p><h2 class="heading 2" id="7.8">Les requêtes multiples de sélection</h2><h3 class="heading 3" id="7.8.1">Les sous-requêtes</h3><p>Les sous-requêtes sont des requêtes effectuées dans d’autres requêtes. Elles remplacent souvent les tables, mais peuvent également remplacer les attributs uniquement si elles ne renvoient qu’une seule valeur.</p><h3 class="heading 3" id="7.8.2">Sélection des enregistrements d'un attribut présents dans la première table ou la deuxième ou les deux (union)</h3><p><span class="script">SELECT </span><span class="script"><i>attribut1</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">UNION</span><span class="script"><br/>
</span><span class="script">SELECT </span><span class="script"><i>attribut1</i></span><span class="script"> FROM </span><span class="script"><i>table</i></span><span class="script"><i>2</i></span><span class="script">;</span></p><h3 class="heading 3" id="7.8.3">Sélection des enregistrements d'un attribut présents dans la première table, mais pas la deuxième (différence)</h3><p><span class="script">SELECT </span><span class="script"><i>attribut1</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">MINUS</span><span class="script"><br/>
</span><span class="script">SELECT </span><span class="script"><i>attribut1</i></span><span class="script"> FROM </span><span class="script"><i>table</i></span><span class="script"><i>2</i></span><span class="script">;</span></p><h3 class="heading 3" id="7.8.4">Sélection des enregistrements d'un attribut présents dans la première table et la deuxième (intersection)</h3><p><span class="script">SELECT </span><span class="script"><i>attribut1</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"><br/>
</span><span class="script">INTERSECT</span><span class="script"><br/>
</span><span class="script">SELECT </span><span class="script"><i>attribut1</i></span><span class="script"> FROM </span><span class="script"><i>table</i></span><span class="script"><i>2</i></span><span class="script">;</span></p><h1 class="heading 1" id="8">Les index</h1><p>Les index permettent de gagner en temps d’exécution pour une sélection d’une colonne avec beaucoup de valeurs.</p><h2 class="heading 2" id="8.1">Créer un index</h2><p><span class="script">CREATE INDEX </span><span class="script"><i>monIndex</i></span><span class="script"> ON </span><span class="script"><i>table1</i></span><span class="script"> [(</span><span class="script"><i>attribut1</i></span><span class="script">[, </span><span class="script"><i>attribut2</i></span><span class="script">…])</span><span class="script">]</span><span class="script">;</span></p><h2 class="heading 2" id="8.2">Supprimer un index</h2><p><span class="script">DROP</span><span class="script"> INDEX </span><span class="script"><i>monIndex</i></span><span class="script">;</span></p><h1 class="heading 1" id="9">Les vues</h1><p>Les vues permettent de réaliser des requêtes de sélections plus facilement. Elles se comportent comme des tables pour les requêtes de sélection.</p><h2 class="heading 2" id="9.1">Créer une vue</h2><p><span class="script">CREATE VIEW </span><span class="script"><i>maVue</i></span><span class="script"> AS SELECT * FROM </span><span class="script"><i>table</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><h2 class="heading 2" id="9.2">Utiliser la vue</h2><p><span class="script">SELECT </span><span class="script"><i>attribut1</i></span><span class="script">, </span><span class="script"><i>attribut2</i></span><span class="script">… FROM </span><span class="script"><i>maVue</i></span><span class="script">;</span></p><h2 class="heading 2" id="9.3">Supprimer la vue</h2><p><span class="script">DROP VIEW [IF EXISTS] </span><span class="script"><i>maVue</i></span><span class="script">;</span></p><h1 class="heading 1" id="10">Les CTE (Common Table Expression)</h1><p>Les CTE sont des vues provisoires, la syntaxe est la suivante :</p><p><span class="script">WITH</span><span class="script"><br/>
</span><span class="script"><i>myCTE1</i></span><span class="script"> AS (</span><span class="script"><i>requete1</i></span><span class="script">),</span><span class="script"><br/>
</span><span class="script"><i>myCTE2</i></span><span class="script"> AS (</span><span class="script"><i>requete</i></span><span class="script"><i>2</i></span><span class="script">)…</span><span class="script"><br/>
</span><span class="script"><i>requeteFinale</i></span><span class="script">;</span></p><h1 class="heading 1" id="11">Autres requêtes de données</h1><h2 class="heading 2" id="11.1">Requête de description d’une table</h2><p><span class="script">DESC </span><span class="script"><i>table</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><p>ou</p><p><span class="script">DESCRIBE </span><span class="script"><i>table</i></span><span class="script"><i>1</i></span><span class="script">;</span></p><h2 class="heading 2" id="11.2">Les transactions</h2><h3 class="heading 3" id="11.2.1">Valider une transaction</h3><p><span class="script">COMMIT;</span></p><h3 class="heading 3" id="11.2.2">Annuler une transaction</h3><p><span class="script">ROLLBACK;</span></p><p><br/></p><h1 class="heading 1" id="12">Programmation procédurale et structurée (PL/SQL)</h1><h2 class="heading 2" id="12.1">Syntaxe du bloc principal</h2><p><span class="script">[DECLARE</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>declarations</i></span><span class="script">;</span><span class="script">]</span><span class="script"><br/>
BEGIN</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instructions</i></span><span class="script">;</span><span class="script"><br/>
</span><span class="script">[</span><span class="script">EXCEPTION</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>gestion_des_erreurs</i></span><span class="script">;</span><span class="script">]</span><span class="script"><br/>
END;</span></p><p class="note">Note : Le bloc DECLARE peut être retiré si aucune déclaration n’a été faite. Le bloc EXCEPTION permet de gérer les erreurs du programme, il n’est donc pas obligatoire. Il est possible de faire plusieurs blocs BEGIN imbriqués.</p><h2 class="heading 2" id="12.2">Déclarations (dans le bloc DECLARE)</h2><h3 class="heading 3" id="12.2.1">Variables de types simples</h3><p><span class="script"><i>v</i></span><span class="script"><i>_variable1</i></span><span class="script"> </span><span class="script"><i>type1</i></span><span class="script"> :</span><span class="script">= </span><span class="script"><i>valeur</i></span><span class="script">;</span><span class="script"><br/>
</span><span class="script"><i>v_variable2</i></span><span class="script"> </span><span class="script"><i>type2</i></span><span class="script">;</span><span class="script"><br/>
</span><span class="script"><i>v_variable3</i></span><span class="script"> </span><span class="script"><i>type3</i></span><span class="script">;</span></p><h3 class="heading 3" id="12.2.2">Variables constantes</h3><p><span class="script"><i>v</i></span><span class="script"><i>_variable1</i></span><span class="script"> CONSTANT </span><span class="script"><i>type1</i></span><span class="script"> :</span><span class="script">= </span><span class="script"><i>valeur</i></span><span class="script">;</span></p><h3 class="heading 3" id="12.2.3">Variables de types d’une colonne</h3><p><span class="script"><i>v</i></span><span class="script"><i>_variable1</i></span><span class="script"> </span><span class="script"><i>table1</i></span><span class="script">.</span><span class="script"><i>attribut1</i></span><span class="script">%TYPE;</span></p><h3 class="heading 3" id="12.2.4">Variables de types d’une ligne entière d’une table</h3><p><span class="script"><i>v</i></span><span class="script"><i>_variable1</i></span><span class="script"> </span><span class="script"><i>table1</i></span><span class="script">%ROWTYPE;</span></p><h3 class="heading 3" id="12.2.5">Curseurs explicites</h3><h4 class="heading 4" id="12.2.5.1">Curseur sans paramètres</h4><p><span class="script">CURSOR </span><span class="script"><i>c_curseur</i></span><span class="script"> IS (SELECT * FROM </span><span class="script"><i>table1</i></span><span class="script"> WHERE </span><span class="script"><i>condition</i></span><span class="script"> [ORDER BY </span><span class="script"><i>attribut1</i></span><span class="script"> [DESC]]</span><span class="script">);</span></p><h4 class="heading 4" id="12.2.5.2">Curseur avec paramètres</h4><p><span class="script">CURSOR </span><span class="script"><i>c_</i></span><span class="script"><i>curseur</i></span><span class="script">(</span><span class="script"><i>v_attribut1</i></span><span class="script"> </span><span class="script"><i>typeSansParentheses</i></span><span class="script">) IS (SELECT * FROM </span><span class="script"><i>table1</i></span><span class="script"> WHERE </span><span class="script"><i>attribut1</i></span><span class="script"> = </span><span class="script"><i>v_attribut1</i></span><span class="script"> [ORDER BY </span><span class="script"><i>attribut1</i></span><span class="script"> [DESC]]);</span></p><h4 class="heading 4" id="12.2.5.3">Curseurs avec verrouillage des données (pour une mise à jour de la table notamment)</h4><p><span class="script">CURSOR </span><span class="script"><i>c_curseur</i></span><span class="script"> IS (SELECT * FROM </span><span class="script"><i>table1</i></span><span class="script"> WHERE </span><span class="script"><i>condition</i></span><span class="script"> [ORDER BY </span><span class="script"><i>attribut1</i></span><span class="script"> [DESC]]) FOR </span><span class="script">UPDATE;</span></p><p class="note">Note : Pour désigner l’élément sélectionné par le curseur dans une condition, entrez : <span class="script">CURRENT OF </span><span class="script"><i>c_curseur</i></span></p><h3 class="heading 3" id="12.2.6">Exceptions</h3><h4 class="heading 4" id="12.2.6.1">Exception simple</h4><p><span class="script"><i>NOM_EXCEPTION_PERSONNALISEE</i></span><span class="script"> </span><span class="script">EXCEPTION</span><span class="script">;</span></p><h4 class="heading 4" id="12.2.6.2">Exception créée à l’aide d’un numéro d’exception</h4><p><span class="script"><i>NOM_EXCEPTION_PERSONNALISEE</i></span><span class="script"> </span><span class="script">EXCEPTION</span><span class="script">;</span><span class="script"><br/>
PRAGMA EXCEPTION_INIT(</span><span class="script"><i>NOM_EXCEPTION_PERSONNALISEE</i></span><span class="script">, </span><span class="script"><i>numero_exception</i></span><span class="script">);</span></p><h2 class="heading 2" id="12.3">Opération d’affectation</h2><h3 class="heading 3" id="12.3.1">Affectation simple</h3><p><span class="script"><i>v</i></span><span class="script"><i>_variable</i></span><span class="script"> :</span><span class="script">= </span><span class="script"><i>valeur</i></span><span class="script">;</span></p><h3 class="heading 3" id="12.3.2">Affectation avec une requête de sélection (ne fonctionne que si la sélection ne renvoie qu’une seule valeur)</h3><p><span class="script">SELECT </span><span class="script"><i>attribut1</i></span><span class="script"> INTO </span><span class="script"><i>v_variable</i></span><span class="script"> FROM </span><span class="script"><i>table1</i></span><span class="script"> WHERE </span><span class="script"><i>condition</i></span><span class="script">;</span></p><h2 class="heading 2" id="12.4">Conditions</h2><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">IF </span><span class="script"><i>condition1</i></span><span class="script"> THEN</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction</i></span><span class="script"><i>1</i></span><span class="script">;</span><span class="script"><br/>
END IF;</span></p></td><td><p>Si <span><i>condition1</i></span> est vraie, alors on exécute <span><i>instruction1</i></span></p></td></tr><tr><td><p><span class="script">IF </span><span class="script"><i>condition1</i></span><span class="script"> THEN</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction</i></span><span class="script"><i>1</i></span><span class="script">;</span><span class="script"><br/>
ELSE</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction2</i></span><span class="script">;</span><span class="script"><br/>
END IF;</span></p></td><td><p>Si <span><i>condition1</i></span> est vraie, alors on exécute <span><i>instruction1</i></span>, sinon, on exécute <span><i>instruction2</i></span></p></td></tr><tr><td><p><span class="script">IF </span><span class="script"><i>condition1</i></span><span class="script"> THEN</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction</i></span><span class="script"><i>1</i></span><span class="script">;</span><span class="script"><br/>
}</span><span class="script"><br/>
ELSIF </span><span class="script"><i>condition2</i></span><span class="script"> THEN</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction2</i></span><span class="script">;</span><span class="script"><br/>
ELSE</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction3</i></span><span class="script">;</span><span class="script"><br/>
END IF;</span></p></td><td><p>Si <span><i>condition1</i></span> est vraie, alors on exécute <span><i>instruction1</i></span>, sinon, si <span><i>condition2</i></span> est vraie, on exécute <span><i>instruction2</i></span>, sinon, on exécute <span><i>instruction3</i></span></p></td></tr></table><h2 class="heading 2" id="12.5">Boucles</h2><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">FOR </span><span class="script"><i>i</i></span><span class="script"> IN </span><span class="script">0..</span><span class="script"><i>n</i></span><span class="script"> LOOP</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction1</i></span><span class="script">;</span><span class="script"><br/>
END LOOP;</span></p></td><td><p>On répète <span><i>n</i></span> fois <span><i>instruction1</i></span> pour <span><i>i</i></span> allant de 0 à <span><i>n</i></span> compris (pas besoin de déclarer la variable, elle est déclarée implicitement et est détruite à la fin de la boucle)</p></td></tr><tr><td><p><span class="script">FOR </span><span class="script"><i>elt</i></span><span class="script"> IN (SELECT * FROM </span><span class="script"><i>table1</i></span><span class="script">) LOOP</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction</i></span><span class="script"><i>1</i></span><span class="script">;</span><span class="script"><br/>
END LOOP;</span></p></td><td><p>On parcourt la requête de sélection (ou une chaine de caractère) pour <span><i>elt</i></span> prenant tous les enregistrements de la requête (pas besoin de déclarer la variable, elle est déclarée implicitement et est détruite à la fin de la boucle)</p></td></tr><tr><td><p><span class="script">WHILE </span><span class="script"><i>condition</i></span><span class="script"> LOOP</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction</i></span><span class="script"><i>1</i></span><span class="script">;</span><span class="script"><br/>
END LOOP;</span></p></td><td><p>On répète jusqu’à ce que condition soit fausse (peut ne pas être répété)</p></td></tr><tr><td><p><span class="script">LOOP</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction</i></span><span class="script"><i>1</i></span><span class="script">;</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;EXIT WHEN </span><span class="script"><i>condition</i></span><span class="script">;</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instruction2</i></span><span class="script">;</span><span class="script"><br/>
END LOOP;</span></p></td><td><p>On répète jusqu’à ce que condition soit fausse (<span><i>instruction1</i></span> est forcément répété une fois)</p></td></tr><tr><td><p><span class="script">EXIT;</span></p></td><td><p>Permet de sortir d’une boucle sans la terminer</p></td></tr></table><h2 class="heading 2" id="12.6">Les curseurs implicites et explicites</h2><h3 class="heading 3" id="12.6.1">Les curseurs implicites</h3><table><tr><td><p><span><b>Curseur</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">SQL%ROWCOUNT</span></p></td><td><p>Nombre de lignes traitées par la requête précédentes de mise à jour de la table</p></td></tr><tr><td><p><span class="script">c</span><span class="script">_curseur%NOTFOUND</span></p></td><td><p>Vérifier que le curseur est vide ou la dernière ligne est déjà atteinte</p></td></tr><tr><td><p><span class="script">c</span><span class="script">_curseur%FOUND</span></p></td><td><p>Vérifier que le curseur n’est pas vide ou la dernière ligne n’est pas encore atteinte</p></td></tr><tr><td><p><span class="script">c</span><span class="script">_curseur%ISOPEN</span></p></td><td><p>Vérifier que le curseur est ouvert</p></td></tr></table><h3 class="heading 3" id="12.6.2">Les curseurs explicites</h3><p><span class="script">OPEN </span><span class="script"><i>c_curseur</i></span><span class="script">[(</span><span class="script"><i>parametres</i></span><span class="script">)</span><span class="script">]</span><span class="script">;</span><span class="script"><br/>
LOOP</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;FETCH </span><span class="script"><i>c_curseur</i></span><span class="script"> INTO </span><span class="script"><i>v_variable</i></span><span class="script">;</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;EXIT WHEN </span><span class="script"><i>c_curseur</i></span><span class="script">%NOTFOUND</span><span class="script">;</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instructions</i></span><span class="script">;</span><span class="script"><br/>
END LOOP;</span><span class="script"><br/>
CLOSE </span><span class="script"><i>c_curseur</i></span><span class="script">; </span></p><p>ou</p><p><span class="script">FOR </span><span class="script"><i>v_variable</i></span><span class="script"> IN </span><span class="script"><i>c_curseur</i></span><span class="script">[(</span><span class="script"><i>parametres</i></span><span class="script">)</span><span class="script">]</span><span class="script"> LOOP</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instructions</i></span><span class="script">;</span><span class="script"><br/>
END LOOP;</span></p><h2 class="heading 2" id="12.7">Les procédures</h2><h3 class="heading 3" id="12.7.1">Créer une procédure</h3><p><span class="script">CREATE OR REPLACE PROCEDURE </span><span class="script"><i>m</i></span><span class="script"><i>aP</i></span><span class="script"><i>rocedure</i></span><span class="script"> [(</span><span class="script"><i>parametreEntree1</i></span><span class="script"> IN </span><span class="script"><i>type</i></span><span class="script"><i>1</i></span><span class="script">, </span><span class="script"><i>parametreSortie1</i></span><span class="script"> OUT </span><span class="script"><i>type2</i></span><span class="script">…)]</span><span class="script"><br/>
IS</span><span class="script"><br/>
 </span><span class="script">   [</span><span class="script"><i>déclarations</i></span><span class="script">]</span><span class="script"><br/>
BEGIN</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instructions</i></span><span class="script">;</span><span class="script"><br/>
EXCEPTION</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>gestion_des_erreurs</i></span><span class="script">;</span><span class="script"><br/>
END;</span></p><p class="note">Note : Les paramètres d’entrée et de sortie ne sont pas obligatoires. Une variable en paramètre peut être à la fois une entrée et une sortie (avec IN OUT). La gestion des exceptions n’est pas obligatoire.</p><h3 class="heading 3" id="12.7.2">Retourner une valeur de la procédure</h3><p><span class="script"><i>parametreSortie</i></span><span class="script"><i>1</i></span><span class="script"> := </span><span class="script"><i>valeur</i></span><span class="script">;</span></p><h3 class="heading 3" id="12.7.3">Faire un appel à la procédure</h3><p><span class="script"><i>m</i></span><span class="script"><i>aP</i></span><span class="script"><i>rocedure</i></span><span class="script">[</span><span class="script">(</span><span class="script"><i>variable1</i></span><span class="script">, </span><span class="script"><i>variable2</i></span><span class="script">)];</span></p><p>ou en dehors d'un bloc :</p><p><span class="script">EXECUTE </span><span class="script"><i>m</i></span><span class="script"><i>aP</i></span><span class="script"><i>rocedure</i></span><span class="script">[</span><span class="script">(</span><span class="script"><i>variable1</i></span><span class="script">, </span><span class="script"><i>variable2</i></span><span class="script">…)];</span></p><h3 class="heading 3" id="12.7.4">Supprimer une procédure</h3><p><span class="script">DROP PROCEDURE </span><span class="script"><i>m</i></span><span class="script"><i>aP</i></span><span class="script"><i>rocedure</i></span><span class="script">;</span></p><h2 class="heading 2" id="12.8">Les fonctions</h2><h3 class="heading 3" id="12.8.1">Créer une fonction</h3><p><span class="script">CREATE OR REPLACE FUNCTION </span><span class="script"><i>m</i></span><span class="script"><i>aF</i></span><span class="script"><i>ontion</i></span><span class="script"> [(</span><span class="script"><i>parametre1</i></span><span class="script"> </span><span class="script"><i>type1</i></span><span class="script">, </span><span class="script"><i>parametre2</i></span><span class="script"> </span><span class="script"><i>type2</i></span><span class="script">…)]</span><span class="script"><br/>
RETURN </span><span class="script"><i>type3</i></span><span class="script"><br/>
IS</span><span class="script"><br/>
 </span><span class="script">   [</span><span class="script"><i>déclarations</i></span><span class="script">]</span><span class="script"><br/>
BEGIN</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instructions</i></span><span class="script">;</span><span class="script"><br/>
EXCEPTION</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>gestion_des_erreurs</i></span><span class="script">;</span><span class="script"><br/>
END;</span></p><h3 class="heading 3" id="12.8.2">Retourner une valeur de la fonction</h3><p><span class="script">RETURN </span><span class="script"><i>variable</i></span><span class="script">;</span></p><h3 class="heading 3" id="12.8.3">Faire un appel à la fonction</h3><p><span class="script"><i>variable</i></span><span class="script"> := </span><span class="script"><i>m</i></span><span class="script"><i>aF</i></span><span class="script"><i>ontion</i></span><span class="script">[(</span><span class="script"><i>variable1</i></span><span class="script">, variable2</span><span class="script">…</span><span class="script">)];</span></p><p>ou en dehors d'un bloc :</p><p><span class="script">SELECT </span><span class="script"><i>m</i></span><span class="script"><i>aF</i></span><span class="script"><i>ontion</i></span><span class="script">[</span><span class="script">(</span><span class="script"><i>variable1</i></span><span class="script">, </span><span class="script"><i>variable2</i></span><span class="script">…</span><span class="script">)] FROM dual;</span></p><h3 class="heading 3" id="12.8.4">Supprimer une fonction</h3><p><span class="script">DROP FUNCTION </span><span class="script"><i>m</i></span><span class="script"><i>aF</i></span><span class="script"><i>ontion</i></span><span class="script">;</span></p><h2 class="heading 2" id="12.9">Les exceptions (dans le bloc EXCEPTION)</h2><h3 class="heading 3" id="12.9.1">Exceptions prédéfinies</h3><table><tr><td><p><span><b>Nom exception</b></span></p></td><td><p><span><b>Erreur Oracle</b></span></p></td><td><p><span><b>Numéro exception</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p>(Sans nom)</p></td><td><p>ORA-00001</p></td><td><p>-803</p></td><td><p>Violation de contrainte unique</p></td></tr><tr><td><p>(Sans nom)</p></td><td><p>ORA-01400</p></td><td><p>-407</p></td><td><p>Violation de contrainte not null</p></td></tr><tr><td><p><span class="script">NO_DATA_FOUND</span></p></td><td><p>ORA-01403</p></td><td><p>100</p></td><td><p>Aucune donnée trouvée</p></td></tr><tr><td><p><span class="script">TOO_MANY_ROWS</span></p></td><td><p>ORA-01422</p></td><td><p>-1422</p></td><td><p>Plus d’une ligne de renvoyées</p></td></tr><tr><td><p><span class="script">ZERO_DIVIDE</span></p></td><td><p>ORA-01476</p></td><td><p>-1476</p></td><td><p>Division par zéro</p></td></tr><tr><td><p>(Sans nom)</p></td><td><p>ORA-02290</p></td><td><p>-2290</p></td><td><p>Violation de contrainte check</p></td></tr><tr><td><p><span class="script">STORAGE_ERROR</span></p></td><td><p>ORA-06500</p></td><td><p>-6500</p></td><td><p>Erreur de stockage</p></td></tr><tr><td><p><span class="script">VALUE_ERROR</span></p></td><td><p>ORA-06502</p></td><td><p>-6502</p></td><td><p>Valeur incorrecte</p></td></tr><tr><td><p><span class="script">CURSOR_ALREADY_OPEN</span></p></td><td><p>ORA-06511</p></td><td><p>-6511</p></td><td><p>Curseur déjà ouvert</p></td></tr><tr><td><p><span class="script">COLLECTION_IS_NULL</span></p></td><td><p>ORA-06531</p></td><td><p>-6531</p></td><td><p>Collection nulle</p></td></tr><tr><td><p>(Sans nom)</p></td><td><p>ORA-00902</p></td><td><p>-104 ou -199</p></td><td><p>Type de donnée invalide</p></td></tr><tr><td><p><span class="script">OTHER</span></p></td><td><p>ORA-42612</p></td><td><p>-84</p></td><td><p>Autres erreurs</p></td></tr></table><h3 class="heading 3" id="12.9.2">Provoquer une erreur personnalisée</h3><p><span class="script">RAISE </span><span class="script"><i>NOM_EXCEPTION_</i></span><span class="script"><i>PERSONNALISEE</i></span><span class="script">;</span></p><h3 class="heading 3" id="12.9.3">Gestion des erreurs (dans le bloc EXCEPTION)</h3><p><span class="script">WHEN </span><span class="script"><i>NOM_EXCEPTION1</i></span><span class="script"> THEN</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instructions</i></span><span class="script"><i>1</i></span><span class="script">;</span><span class="script"><br/>
WHEN </span><span class="script"><i>NOM_EXCEPTION2</i></span><span class="script"> THEN</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>instructions2</i></span><span class="script">; </span></p><h2 class="heading 2" id="12.10">Les instructions de base</h2><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">SET SERVEROUTPUT </span><span class="script">ON;</span></p></td><td><p>Activer les commandes d’affichage de messages dans la console (à exécuter 1 fois par fichier au démarrage de SQL Developer)</p></td></tr><tr><td><p><span class="script">DBMS_OUTPUT.PUT_LINE('</span><span class="script"><i>texte</i></span><span class="script">'</span><span class="script">);</span></p></td><td><p>Affiche un texte dans la console avec un retour à la ligne</p></td></tr></table>
			</article>
		</main>
		<footer>
			<script src="../../scripts/footer.js"></script>
			<a class="top" href="#"><img src="../../images/top.png"></a>
		</footer>
		<script src="../../scripts/script.js"></script>
		<script src="../../scripts/tableDesMatieres.js"></script>
	</body>
</html>
