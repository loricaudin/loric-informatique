<!DOCTYPE html> <!-- Loric Informatique (page générée automatiquement à partir d'un document Word (version du modèle : 1.0)) -->
<html lang="fr-FR">
	<head>
		<title>Loric Informatique - Django</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="robots" content="noindex, nofollow">
		<link rel="icon" href="../../images/icone.png">
		<link rel="stylesheet" href ="../../styles/style.css">
	</head>
	<body>
		<header>
			<script src="../../scripts/header.js"></script>
		</header>
		<main class="pageMemento">
			<section class="presentation">
				<div class="alignementVertical">
					<div>
						<h1>Mémento Django</h1>
						<p class="version">Version 0.1 (créé le 27/10/2025, modifié le 27/10/2025)</p>
						<p><p class="zone-texte">Description</p></p>
						<a href="Loric Informatique - Django.pdf"><button onclick="window.location.href = ''" class="telecharger">Télécharger</button></a>
						<a><button onclick="alert('Pour imprimer votre document, nous vous conseillons de choisir le format A4, de cocher Imprimer les arrière-plans et de décocher Imprimer les en-têtes et pieds de page.');print()" class="imprimer">Imprimer</button></a>
					</div>
					<img src="icone_django.png" class="logoMemento"/>
				</div>
			</section>
			<section class="sommaire">
				<h2>Table des matières :</h2>
				<div class="tableDesMatieres">
					<!-- Table des matières remplie par le JavaScript -->
				</div>
			</section>
			<article>
				<h1 class="heading 1" id="1">Prise en main</h1><h2 class="heading 2" id="1.1">Outils nécessaires</h2><ul><li class="list paragraph">Python (version 3.10 ou supérieure)</li></ul><h2 class="heading 2" id="1.2">Installer Django</h2><p>Exécuter dans l’invite de commande en tant qu’administrateur :</p><p><span class="script">pip</span><span class="script"> </span><span class="script">install</span><span class="script"> </span><span class="script">django</span></p><p>Ou (sur Linux uniquement en dehors d’un venv) :</p><p><span class="script">sudo</span><span class="script"> </span><span class="script">apt</span><span class="script"> </span><span class="script">install</span><span class="script"> python3-django</span></p><p class="note"><br/>Pour vérifier que Django est bien installé, exécuter la commande :
<span class="script">django</span><span class="script">-admin --version</span></p><h2 class="heading 2" id="1.3">Initialiser un projet Django</h2><p>Pour initialiser un projet Django, entrer la commande :</p><p><span class="script">django</span><span class="script">-admin </span><span class="script">startproject</span><span class="script"> </span><span class="script"><i>mon_projet</i></span></p><h2 class="heading 2" id="1.4">Initialiser une application Django</h2><p>Pour initialiser une application Django dans un projet, entrer la commande :</p><p><span class="script">python</span><span class="script"> manage.py </span><span class="script">startapp</span><span class="script"> </span><span class="script"><i>mon_application</i></span></p><p class="note">Attention ! Une application est une application Web qui fait quelque chose (par exemple un système de blog, une base de données publique ou une petite application de sondage). Un projet est un ensemble de réglages et d’applications pour un site Web particulier. Un projet peut contenir plusieurs applications. Une application peut apparaître dans plusieurs projets.</p><h2 class="heading 2" id="1.5">Démarrer le projet Django</h2><p>Pour démarrer le serveur, entrer la commande suivante :</p><p><span class="script">python</span><span class="script"> manage.py </span><span class="script">runserver</span></p><h2 class="heading 2" id="1.6">Tester les commandes Django dans une console</h2><p>Pour ouvrir la console Django, entrer la commande suivante :</p><p><span class="script">python</span><span class="script"> manage.py </span><span class="script">shell</span></p><p><br/></p><h1 class="heading 1" id="2">Bases du Framework</h1><h2 class="heading 2" id="2.1">Les modèles (le fichier models.py)</h2><p>Les modèles sont des classes représentant les tables de la base de données. Tous les champs déclarés dans la classe représentent les champs qui seront créés dans la base de données.</p><p class="note">Un champ <span class="script">id </span>est créé automatiquement pour chaque modèle.</p><h3 class="heading 3" id="2.1.1">Syntaxe</h3><p><span class="script">from</span><span class="script"> </span><span class="script">d</span><span class="script">jango.db</span><span class="script"> import models</span></p><p><span class="script">class</span><span class="script"> </span><span class="script"><i>MonModele</i></span><span class="script">(</span><span class="script">models.Model</span><span class="script">):</span></p><p><span class="script">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>mon</i></span><span class="script"><i>_champ1</i></span><span class="script"> = models.</span><span class="script"><i>TypeDonnees1</i></span><span class="script">(</span><span class="script"><i>parametres</i></span><span class="script">)</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>mon_champ2</i></span><span class="script"> = models.</span><span class="script"><i>TypeDonnees1</i></span><span class="script">(</span><span class="script"><i>parametres</i></span><span class="script">)</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;…</span></p><h3 class="heading 3" id="2.1.2">Les types de données</h3><h4 class="heading 4" id="2.1.2.1">Paramètres en commun</h4><table><tr><td><p><span><b>Paramètre</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">verbose</span><span class="script">_name</span><span class="script">="</span><span class="script"><i>nom de la colonne</i></span><span class="script">"</span></p></td><td><p>Utiliser un autre nom de colonne (comme verbose_name est le premier paramètre pour les types de bases (sauf pour les clés étangères), il est possible de ne juste mettre le nom de la colonne en paramètre)</p></td></tr><tr><td><p><span class="script">null</span><span class="script">=</span><span class="script">True</span></p></td><td><p>Autoriser les valeurs NULL dans la base de données (False est la valeur par défaut)</p></td></tr><tr><td><p><span class="script">blank</span><span class="script">=</span><span class="script">True</span></p></td><td><p>Autoriser à laisser le champ vide dans le formulaire (Attention à ne pas confondre avec null !) (False est la valeur par défaut)</p></td></tr><tr><td><p><span class="script">choices</span><span class="script">={</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;"</span><span class="script"><i>choix_1</i></span><span class="script">": "</span><span class="script"><i>valeur_1</i></span><span class="script">",</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;"</span><span class="script"><i>choix_2</i></span><span class="script">": "</span><span class="script"><i>valeur_2</i></span><span class="script">"…</span><span class="script"><br/>
}</span><span class="script"><br/>
</span>ou<br/>
<span class="script">choices</span><span class="script">=</span><span class="script"><i>ma_fonction</i></span><span class="script"><br/>
</span></p></td><td><p>Utiliser une liste de choix possibles (1 choix possible) (la liste peut être un dictionnaire, pouvant contenir un sous-dictionnaire pour faire des groupes, ça peut également être un tableau de tuples) (il est également possible de mettre une fonction renvoyant des choix)</p></td></tr><tr><td><p><span class="script">default</span><span class="script">=</span><span class="script"><i>valeur</i></span></p></td><td><p>Affecter une valeur par défaut</p></td></tr><tr><td><p><span class="script">db</span><span class="script">_default</span><span class="script">=valeur</span></p></td><td><p>Affecter une valeur par défaut dans la base de données si la valeur du champ est vide (<span class="script">default </span>est prioritaire)</p></td></tr><tr><td><p><span class="script">help</span><span class="script">_text</span><span class="script">="</span><span class="script"><i>mo</i></span><span class="script"><i>n texte</i></span><span class="script">"</span></p></td><td><p>Afficher un texte au survol du champ dans un formulaire</p></td></tr><tr><td><p><span class="script">primary</span><span class="script">_key</span><span class="script">=</span><span class="script">True</span></p></td><td><p>Définir le champ comme une clé primaire (implique null=False et unique=True) (attention : un seul champ peut avoir cet attribut, si un champ possède cet attribut, il n’y aura pas de colonne id de créée)</p></td></tr><tr><td><p><span class="script">unique</span><span class="script">=</span><span class="script">True</span></p></td><td><p>Interdire les doublons pour ce champ</p></td></tr><tr><td></td><td></td></tr></table><h4 class="heading 4" id="2.1.2.2">IntegerField (pour les entiers)</h4><p>Syntaxe :</p><p><span class="script"><i>mon</i></span><span class="script"><i>_champ</i></span><span class="script"> = </span><span class="script">models.IntegerField</span><span class="script">(</span><span class="script"><i>parametres</i></span><span class="script">)</span></p><table><tr><td><p><span><b>Paramètre</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table><h4 class="heading 4" id="2.1.2.3">CharField (pour les chaînes de caractères)</h4><p>Syntaxe :</p><p><span class="script"><i>mon</i></span><span class="script"><i>_champ</i></span><span class="script"> = </span><span class="script">models.CharField</span><span class="script">(</span><span class="script"><i>parametres</i></span><span class="script">)</span></p><table><tr><td><p><span><b>Paramètre</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">max</span><span class="script">_length</span></p></td><td><p>Définir la taille maximale dans la base de données (à passer obligatoirement)</p></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table><h4 class="heading 4" id="2.1.2.4">DateTimeField (pour les dates et heures)</h4><p>Syntaxe :</p><p><span class="script"><i>mon</i></span><span class="script"><i>_champ</i></span><span class="script"> = </span><span class="script">models.DateTimeField</span><span class="script">(</span><span class="script"><i>parametres</i></span><span class="script">)</span></p><table><tr><td><p><span><b>Paramètre</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table><p class="note">Pour n’avoir que les dates ou que les heures, il est possible d’utiliser <span class="script">DateField</span>et <span class="script">TimeField</span>.</p><h4 class="heading 4" id="2.1.2.5">ForeignKey (pour faire référence à une autre table (plusieurs à un))</h4><p>ForeignKey permet de faire une relation Many To One, c’est-à-dire tous les enregistrements peuvent faire référence à un seul même enregistrement.</p><p>Syntaxe (pour faire référence à un autre modèle) :</p><p><span class="script"><i>mon</i></span><span class="script"><i>_champ</i></span><span class="script"> = </span><span class="script">models.ForeignKey</span><span class="script">(to=</span><span class="script"><i>MonModele</i></span><span class="script">, </span><span class="script"><i>parametres</i></span><span class="script">)</span></p><table><tr><td><p><span><b>Paramètre</b></span></p></td><td><p><span><b>Description</b></span></p></td><td><p><span><b>Valeurs possibles</b></span></p></td></tr><tr><td><p><span class="script">to</span></p></td><td><p>Lier à un autre modèle (comme c’est le premier paramètre, il est possible de ne juste mettre le nom du modèle en paramètre)</p></td><td><p><span class="script">MonModele</span></p><p><span class="script">'self'</span> (pour une relation récursive)</p></td></tr><tr><td><p><span class="script">on</span><span class="script">_delete</span></p></td><td></td><td><p><span class="script">models.CASCADE</span></p></td></tr><tr><td><p><span class="script">related</span><span class="script">_name</span></p></td><td></td><td><p><span class="script">"</span><span class="script"><i>Nom de la colonne</i></span><span class="script">"</span></p></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></table><h4 class="heading 4" id="2.1.2.6">OneToOneField (pour faire référence à une autre table (un à un))</h4><p>OneToOneField permet de faire une relation One To One, c’est-à-dire l’enregistrement peut faire la relation avec un autre enregistrement qui n’est pas déjà en relation.</p><p>Syntaxe (pour faire référence à un autre modèle) :</p><p><span class="script"><i>mon</i></span><span class="script"><i>_champ</i></span><span class="script"> = </span><span class="script">models.OneToOneField</span><span class="script">(to=</span><span class="script"><i>MonModele</i></span><span class="script">, </span><span class="script"><i>parametres</i></span><span class="script">)</span></p><table><tr><td><p><span><b>Paramètre</b></span></p></td><td><p><span><b>Description</b></span></p></td><td><p><span><b>Valeurs possibles</b></span></p></td></tr><tr><td><p><span class="script">to</span></p></td><td><p>Lier à un autre modèle (comme c’est le premier paramètre, il est possible de ne juste mettre le nom du modèle en paramètre)</p></td><td><p><span class="script">MonModele</span></p><p><span class="script">'self'</span> (pour une relation récursive)</p></td></tr><tr><td><p><span class="script">on</span><span class="script">_delete</span></p></td><td></td><td><p><span class="script">models.CASCADE</span></p></td></tr><tr><td><p><span class="script">related</span><span class="script">_name</span></p></td><td></td><td><p><span class="script">"</span><span class="script"><i>Nom de la colonne</i></span><span class="script">"</span></p></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></table><h4 class="heading 4" id="2.1.2.7">ManyToManyField (pour faire référence à une autre table (plusieurs à plusieurs))</h4><p>ManyToManyField permet de faire une relation Many To Many, c’est-à-dire tous les enregistrements peuvent faire référence à un ou plusieurs enregistrements.</p><p>Syntaxe (pour faire référence à un autre modèle) :</p><p><span class="script"><i>mon</i></span><span class="script"><i>_champ</i></span><span class="script"> = </span><span class="script">models.ManyToManyField</span><span class="script">(to=</span><span class="script"><i>MonModele</i></span><span class="script">, </span><span class="script"><i>parametres</i></span><span class="script">)</span></p><table><tr><td><p><span><b>Paramètre</b></span></p></td><td><p><span><b>Description</b></span></p></td><td><p><span><b>Valeurs possibles</b></span></p></td></tr><tr><td><p><span class="script">to</span></p></td><td><p>Lier à un autre modèle (comme c’est le premier paramètre, il est possible de ne juste mettre le nom du modèle en paramètre)</p></td><td><p><span class="script">MonModele</span></p><p><span class="script">'self'</span> (pour une relation récursive)</p></td></tr><tr><td><p><span class="script">on</span><span class="script">_delete</span></p></td><td></td><td><p><span class="script">models.CASCADE</span></p></td></tr><tr><td><p><span class="script">through</span></p></td><td><p>Spécifier le nom de la table intermédiaire</p></td><td><p><span class="script">"</span><span class="script"><i>MaTableIntermediaire</i></span><span class="script">"</span></p></td></tr><tr><td><p><span class="script">through</span><span class="script">_fields</span></p></td><td><p>Spécifier les champs dans la table intermédiaire (par défaut seul les champs des clés étrangères sont spécifiées)</p></td><td><p><span class="script">("</span><span class="script"><i>mon_champ_1</i></span><span class="script">", "</span><span class="script"><i>mon_champ_2</i></span><span class="script">"…)</span></p></td></tr><tr><td><p><span class="script">related</span><span class="script">_name</span></p></td><td></td><td><p><span class="script">"</span><span class="script"><i>Nom de la co</i></span><span class="script"><i>lonne</i></span><span class="script">"</span></p></td></tr><tr><td></td><td></td><td></td></tr></table><h4 class="heading 4" id="2.1.2.8">BigAutoField( ?)</h4><h4 class="heading 4" id="2.1.2.9">UUIDField( ?)</h4><h3 class="heading 3" id="2.1.3">Créer un fichier de migrations</h3><p>Pour générer un fichier de migrations, entrer la commande : <span class="script">python manage.py </span><span class="script">makemigrations</span><span class="script"> </span><span class="script"><i>mon_application</i></span></p><p class="note">Pour vérifier le fichier SQL généré, exécuter la commande : <span class="script">python manage.py </span><span class="script">sqlmigrate</span><span class="script"> </span><span class="script"><i>application</i></span><span class="script"> 0001</span></p><p>Pour migrer les modèles vers une base de données, pensez à l’ajouter dans la liste des applications installées et à exécuter : <span class="script">python manage.py </span><span class="script">migrate</span></p><p class="note">Pour plus d’infos sur les migrations, voir : Les fichiers de configurations &gt; Les applications Django</p><h2 class="heading 2" id="2.2">Les contrôleurs</h2><p>A voir si c’est à garder</p><h2 class="heading 2" id="2.3">Les vues (views.py)</h2><h3 class="heading 3" id="2.3.1">Les vues simples</h3><h4 class="heading 4" id="2.3.1.1">Créer une vue simple</h4><p><span class="script">from</span><span class="script"> </span><span class="script">django.http</span><span class="script"> import </span><span class="script">HttpResponse</span><span class="script"><br/>
</span><span class="script"><br/>
</span><span class="script">def</span><span class="script"> </span><span class="script"><i>ma_page</i></span><span class="script">(request):</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;return </span><span class="script">HttpResponse</span><span class="script">("</span><span class="script"><i>message</i></span><span class="script">")</span></p><p class="note">Par convention, comme en HTML, la page principale (<span class="script"><i>ma_page</i></span>) s’appelle <span class="script">index</span>.</p><h4 class="heading 4" id="2.3.1.2">Créer une vue simple avec des paramètres dans le chemin</h4><p><span class="script">from</span><span class="script"> </span><span class="script">django.http</span><span class="script"> import </span><span class="script">HttpResponse</span><span class="script"><br/>
</span><span class="script"><br/>
</span><span class="script">def</span><span class="script"> </span><span class="script"><i>ma_page</i></span><span class="script">(re</span><span class="script">quest, </span><span class="script"><i>parametre1</i></span><span class="script">, </span><span class="script"><i>parametre2</i></span><span class="script">…):</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;return </span><span class="script">HttpResponse</span><span class="script">("</span><span class="script"><i>message</i></span><span class="script">")</span></p><h4 class="heading 4" id="2.3.1.3">Les valeurs de retour</h4><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">HttpResponse</span><span class="script">("</span><span class="script"><i>message</i></span><span class="script">")</span></p></td><td><p>Renvoyer une réponse en texte brut (importation : <span class="script">from</span><span class="script"> </span><span class="script">django.http</span><span class="script"> import </span><span class="script">HttpResponse</span>)</p></td></tr><tr><td><p><span class="script">HttpResponseRedirect</span><span class="script">(</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;re</span><span class="script">verse("</span><span class="script"><i>mon_app:ma_page</i></span><span class="script">", args=(</span><span class="script"><i>parametre1</i></span><span class="script">, </span><span class="script"><i>parametre2</i></span><span class="script">…))</span><span class="script"><br/>
)</span></p></td><td><p>Renvoyer une réponse en texte brut (importation : <span class="script">from</span><span class="script"> </span><span class="script">django.http</span><span class="script"> import </span><span class="script">HttpResponse</span>)</p></td></tr><tr><td><p><span class="script">Http404("</span><span class="script"><i>erreur</i></span><span class="script">")</span></p></td><td><p>Renvoyer une erreur 404</p></td></tr><tr><td><p><span class="script">template</span><span class="script"> = </span><span class="script">loader.get_template</span><span class="script">(</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;"</span><span class="script"><i>fichier</i></span><span class="script">.html"</span><span class="script"><br/>
)</span><span class="script"><br/>
</span><span class="script">context</span><span class="script"> = {</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;"</span><span class="script"><i>variable1</i></span><span class="script">": </span><span class="script"><i>valeur1</i></span><span class="script">,</span><span class="script"><br/>
</span><span class="script">&nbsp;&nbsp;&nbsp;&nbsp;"</span><span class="script"><i>variable2</i></span><span class="script">": </span><span class="script"><i>valeur2</i></span><span class="script">,</span><span class="script"><br/>
}</span></p><p><span class="script">return</span><span class="script"> </span><span class="script">HttpResponse</span><span class="script">(</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script">template.render</span><span class="script">(</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script">context</span><span class="script">, request</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)</span><span class="script"><br/>
) </span></p></td><td><p>Renvoyer une page HTML présente dans le dossier templates de l’application (à créer s’il n’existe pas) avec des paramètres passées dans la variable <span><i>context</i></span><span><i> </i></span>pouvant être récupérées depuis un fichier HTML (importation : <span class="script">from</span><span class="script"> </span><span class="script">django.template</span><span class="script"> import loader</span>)</p></td></tr><tr><td><p><span class="script">context</span><span class="script"> = {</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;"</span><span class="script"><i>variable1</i></span><span class="script">": </span><span class="script"><i>valeur1</i></span><span class="script">,</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;"</span><span class="script"><i>variable2</i></span><span class="script">": </span><span class="script"><i>valeur2</i></span><span class="script">,</span><span class="script"><br/>
}</span><span class="script"><br/>
return </span><span class="script">render</span><span class="script">(request, "</span><span class="script"><i>fichier</i></span><span class="script">.html", </span><span class="script">context</span><span class="script">)</span></p></td><td><p>Méthode plus rapide et plus simple pour renvoyer un fichier HTML avec des variables passées en paramètres (importation : <span class="script">from</span><span class="script"> </span><span class="script">django.shortcuts</span><span class="script"> import </span><span class="script">render</span>)</p></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table><h4 class="heading 4" id="2.3.1.4">Récupération des valeurs dans la requête</h4><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">request.GET</span><span class="script">["</span><span class="script"><i>valeur-formulaire</i></span><span class="script">"]</span></p></td><td><p>Récupérer une valeur d’un formulaire passée en méthode GET</p></td></tr><tr><td><p><span class="script">request.POST</span><span class="script">["</span><span class="script"><i>valeur-formulaire</i></span><span class="script">"]</span></p></td><td><p>Récupérer une valeur d’un formulaire passée en méthode POST (Importation nécessaire dans le fichier HTML : {% csrf_token %})</p></td></tr></table><h3 class="heading 3" id="2.3.2">Les vues génériques</h3><p>Voir https://docs.djangoproject.com/fr/5.2/intro/tutorial04/</p><h3 class="heading 3" id="2.3.3">Interactions avec une base de données</h3><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script"><i>MonModele</i></span><span class="script">.objects.get</span><span class="script">(id=</span><span class="script"><i>mon_id</i></span><span class="script">)</span></p></td><td><p>Récupérer un objet en fonction de son id</p></td></tr><tr><td><p><span class="script"><i>MonModele</i></span><span class="script">.objects.filter</span><span class="script">({</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>colonne1</i></span><span class="script">=</span><span class="script"><i>valeur1</i></span><span class="script">,</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>colonne2</i></span><span class="script">=</span><span class="script"><i>valeur2</i></span><span class="script">…</span><span class="script"><br/>
})</span></p></td><td><p>Récupérer une liste d’objets respectant les conditions</p></td></tr><tr><td><p><span class="script"><i>MonModele</i></span><span class="script">.objects.filter</span><span class="script">(</span><span class="script"><i>filtre</i></span><span class="script">)</span><span class="script"><br/>
.first()</span></p></td><td></td></tr><tr><td><p><span class="script"><i>MonModele</i></span><span class="script">.objects.order</span><span class="script">_by</span><span class="script">()</span></p></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td><p><span class="script"><i>mon</i></span><span class="script"><i>_objet</i></span><span class="script">.save</span><span class="script">()</span></p></td><td><p>Enregistrer les valeurs de l’objet dans la base de données</p></td></tr><tr><td><p><span class="script">get</span><span class="script">_object_or_404(</span><span class="script"><i>MonModele</i></span><span class="script">, pk=</span><span class="script"><i>mon_id</i></span><span class="script">)</span></p></td><td><p>Récupérer un objet en fonction de son id, ou renvoyer une erreur 404 (importation : <span class="script">from</span><span class="script"> </span><span class="script">django.shortcuts</span><span class="script"> import get_object_or_404</span>)</p></td></tr><tr><td><p><span class="script">get</span><span class="script">_list_or_404()</span></p></td><td></td></tr><tr><td><p><span class="script">F("</span><span class="script"><i>colonne</i></span><span class="script">")</span></p></td><td><p>Récupérer une valeur provenant de la base de données (utile pour faire par exemple une incrémentation de valeur dans la base de données)</p></td></tr></table><p class="note">L’importation du modèle se fait avec : <span class="script">from</span><span class="script"> .models</span><span class="script"> import </span><span class="script"><i>MonModele</i></span></p><h2 class="heading 2" id="2.4">Les chemins</h2><p>Les chemins se présentent dans le fichier urls.py se trouvant dans le dossier du projet. Il est également possible de mettre ce même fichier dans d’autres fichiers urls.py présents dans les dossiers des applications.</p><h3 class="heading 3" id="2.4.1">Syntaxe</h3><p><span class="script">from</span><span class="script"> </span><span class="script">django.urls</span><span class="script"> import </span><span class="script">path</span><span class="script"><br/>
</span><span class="script"><br/>
</span><span class="script">app_name</span><span class="script"> = '</span><span class="script"><i>nom_application</i></span><span class="script">'</span><span class="script"><br/>
</span><span class="script">urlpatterns</span><span class="script"> = [</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>chemin1</i></span><span class="script">,</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="script"><i>chemin2</i></span><span class="script">…</span></p><p><span class="script">]</span></p><h3 class="heading 3" id="2.4.2">Les différents chemins possibles</h3><h4 class="heading 4" id="2.4.2.1">Chemin vers Django Admin</h4><p><span class="script">path</span><span class="script">(</span><span class="script">"admin/", </span><span class="script">admin.site.urls</span><span class="script">)</span></p><h4 class="heading 4" id="2.4.2.2">Chemin vers une autre vue</h4><p><span class="script">path</span><span class="script">(</span><span class="script">"", </span><span class="script">views.</span><span class="script"><i>ma_page</i></span><span class="script">, </span><span class="script">name</span><span class="script">="</span><span class="script"><i>ma_page</i></span><span class="script">")</span></p><p class="note">N’oubliez pas de faire : <span class="script">from</span><span class="script"> .</span><span class="script"> </span><span class="script">import</span><span class="script"> </span><span class="script">views</span></p><h4 class="heading 4" id="2.4.2.3">Chemin vers un autre fichier d’URLs</h4><p><span class="script">path</span><span class="script">(</span><span class="script">"arbre/", </span><span class="script">include</span><span class="script">("</span><span class="script"><i>mon_application</i></span><span class="script">.urls</span><span class="script">"))</span></p><p class="note">La fonction <span class="script">include</span> doit être importée avec : <span class="script">from</span><span class="script"> </span><span class="script">django.urls</span><span class="script"> import </span><span class="script">include</span><span class="script">, </span><span class="script">path</span></p><h4 class="heading 4" id="2.4.2.4">Chemin avec un paramètre</h4><p><span class="script">path</span><span class="script">("&lt;</span><span class="script"><i>type</i></span><span class="script">:</span><span class="script"><i>parametre1</i></span><span class="script">&gt;/", </span><span class="script">view</span><span class="script">s.</span><span class="script"><i>ma_page</i></span><span class="script">, </span><span class="script">name</span><span class="script">="</span><span class="script"><i>ma_page</i></span><span class="script">")</span></p><h2 class="heading 2" id="2.5">Les contrôleurs REST</h2><h2 class="heading 2" id="2.6">Les routes</h2><p>(à voir si à garder)</p><h2 class="heading 2" id="2.7">Connexion à une base de données</h2><p><br/></p><h1 class="heading 1" id="3">Django Admin</h1><p>Django Admin permet une gestion administrateur de tout le projet.</p><p class="note">Un site est également inclus dans le projet pour simplifier l’administration. Il est accessible via le chemin /admin</p><h2 class="heading 2" id="3.1">Les utilisateurs</h2><h3 class="heading 3" id="3.1.1">Créer un utilisateur</h3><p>Entrer la commande : <span class="script">python manage.py </span><span class="script">createsuperuser</span></p><p>Saisissez ensuite le nom d’utilisateur, l’adresse mail (facultatif) et le mot de passe.</p><h2 class="heading 2" id="3.2">Les formulaires d’administration</h2><p>Il est possible de rendre les données de son application modifiable via des formulaires d’administration depuis l’interface Django Admin que seuls les administrateurs auront accès. Django propose une génération et une personnalisation rapide des formulaires depuis le fichier admin.py.</p><h3 class="heading 3" id="3.2.1">Inscrire un modèle pour générer un formulaire d’administration</h3><p>Syntaxe de base (dans le fichier admin.py) :</p><p><span class="script">from</span><span class="script"> </span><span class="script">django.contrib</span><span class="script"> import admin</span><span class="script"><br/>
</span><span class="script"><br/>
</span><span class="script">from</span><span class="script"> .models import </span><span class="script"><i>MonModele</i></span><span class="script"><br/>
</span><span class="script"><br/>
</span><span class="script">admin.site.register</span><span class="script">(</span><span class="script"><i>MonModele</i></span><span class="script">)</span></p><h3 class="heading 3" id="3.2.2">Personnalisation d’un formulaire d’administration (admin.ModelAdmin)</h3><h4 class="heading 4" id="3.2.2.1">Syntaxe</h4><p><span class="script">from</span><span class="script"> </span><span class="script">django.contrib</span><span class="script"> import admin</span><span class="script"><br/>
</span><span class="script"><br/>
</span><span class="script">from</span><span class="script"> .models import </span><span class="script"><i>MonModele</i></span><span class="script"><br/>
</span><span class="script"><br/>
class </span><span class="script"><i>MonModeleAdmin</i></span><span class="script">(</span><span class="script">admin.ModelAdmin</span><span class="script">):</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;…</span><span class="script"><br/>
</span><span class="script"><br/>
</span><span class="script">admin.site.register</span><span class="script">(</span><span class="script"><i>MonModele</i></span><span class="script">)</span></p><h4 class="heading 4" id="3.2.2.2">Les différents éléments personnalisables de base dans le formulaire (à insérer dans la classe)</h4><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">fields</span><span class="script"> = ["</span><span class="script"><i>champ_1</i></span><span class="script">", "</span><span class="script"><i>champ_2</i></span><span class="script">"…]</span></p></td><td><p>Spécifier les champs du modèle à afficher dans le formulaire (par défaut, tous les champs apparaissent, sauf l’id) et leur ordre</p></td></tr><tr><td><p><span class="script">fieldsets</span><span class="script"> = [</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;("</span><span class="script"><i>Groupe 1</i></span><span class="script">", {</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"</span><span class="script">fields</span><span class="script">": ["</span><span class="script"><i>champ_1</i></span><span class="script">", "</span><span class="script"><i>champ_2</i></span><span class="script">"…]</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;),</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;("G</span><span class="script"><i>roupe 2</i></span><span class="script">", {</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"</span><span class="script">fields</span><span class="script">": ["</span><span class="script"><i>champ_3</i></span><span class="script">", "</span><span class="script"><i>champ_4</i></span><span class="script">"…]</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;)</span><span class="script"><br/>
]</span></p></td><td><p>Structurer les champs dans différents groupes</p></td></tr><tr><td></td><td></td></tr></table><h4 class="heading 4" id="3.2.2.3">Les listes de choix</h4><p><br/></p><h1 class="heading 1" id="4">Le Framework côté HTML</h1><h2 class="heading 2" id="4.1">Les templates (fichiers html)</h2><h3 class="heading 3" id="4.1.1">Le binding dans les balises</h3><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">&lt;</span><span class="script">a</span><span class="script"> href="{% url '</span><span class="script"><i>ma_page</i></span><span class="script">' </span><span class="script"><i>parametres</i></span><span class="script"><i> </i></span><span class="script">%}"&gt;Cliquer ici&lt;/a&gt;</span></p></td><td><p>Insérer un lien dynamique (paramétré dans urls.py avec "<span><i>ma_page</i></span>" le lien ayant pour name égale à cette valeur)</p></td></tr><tr><td><p><span class="script">&lt;</span><span class="script">a</span><span class="script"> href="{% url '</span><span class="script"><i>mon_application</i></span><span class="script">:</span><span class="script"><i>ma_page</i></span><span class="script">' </span><span class="script"><i>parametres</i></span><span class="script"><i> </i></span><span class="script">%}"&gt;Cliquer ici&lt;/a&gt;</span></p></td><td><p>Insérer un lien dynamique faisant référence à une autre application</p></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table><h3 class="heading 3" id="4.1.2">Conditions</h3><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">{% if </span><span class="script"><i>condition </i></span><span class="script">%}</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span class="script"><i>balise1</i></span><span class="script">&gt;</span><span class="script"><i>contenu1</i></span><span class="script">&lt;/</span><span class="script"><i>balise1</i></span><span class="script">&gt;</span><span class="script"><br/>
{% </span><span class="script">endif</span><span class="script"> %}</span></p></td><td><p>Si <span><i>condition1 </i></span>est vraie, alors on affiche <span><i>contenu1</i></span></p></td></tr><tr><td><p><span class="script">{% if </span><span class="script"><i>condition </i></span><span class="script">%}</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span class="script"><i>balise1</i></span><span class="script">&gt;</span><span class="script"><i>contenu1</i></span><span class="script">&lt;/</span><span class="script"><i>balise1</i></span><span class="script">&gt;</span><span class="script"><br/>
{% </span><span class="script">else</span><span class="script"> %}</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span class="script"><i>balise2</i></span><span class="script">&gt;</span><span class="script"><i>contenu2</i></span><span class="script">&lt;/</span><span class="script"><i>balise2</i></span><span class="script">&gt;</span><span class="script"><br/>
{% </span><span class="script">endif</span><span class="script"> %}</span></p></td><td><p>Si <span><i>condition1 </i></span>est vraie, alors on affiche <span><i>contenu1</i></span>, sinon, on affiche <span><i>contenu2</i></span></p></td></tr><tr><td></td><td><p>Si <span><i>condition1 </i></span>est vraie, alors on affiche <span><i>contenu1</i></span>, sinon, si <span><i>condition2 </i></span>est vraie, alors on affiche <span><i>contenu2</i></span>, sinon, on affiche <span><i>contenu3</i></span></p></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table><h3 class="heading 3" id="4.1.3">Boucles</h3><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td></td><td><p>On répète <span><i>n</i></span> fois l’instruction pour <span><i>i</i></span></p><p>allant de 0 compris à <span><i>n</i></span> non</p><p>compris</p></td></tr><tr><td></td><td><p>On répète <span><i>f</i></span>-<span><i>d</i></span> fois l’instruction pour <span><i>i</i></span></p><p>allant de <span><i>d</i></span> compris à <span><i>f</i></span> non compris</p></td></tr><tr><td></td><td><p>On répète (<span><i>f</i></span>-<span><i>d</i></span>)/<span><i>p</i></span> fois l’instruction</p><p>pouri allant de <span><i>d</i></span> compris à <span><i>f</i></span> non</p><p>compris avec pour pas égal à <span><i>p</i></span></p></td></tr><tr><td><p><span class="script">{% for </span><span class="script"><i>elt</i></span><span class="script"><i> </i></span><span class="script">in </span><span class="script"><i>liste </i></span><span class="script">%}</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span class="script"><i>balise1</i></span><span class="script">&gt;</span><span class="script"><i>contenu1</i></span><span class="script">&lt;/</span><span class="script"><i>balise1</i></span><span class="script">&gt;</span><span class="script"><br/>
{% </span><span class="script">endfor</span><span class="script"> %}</span></p></td><td><p>On parcourt la liste (ou une chaîne</p><p>de caractères) pour <span><i>elt</i></span><span><i> </i></span>prenant</p><p>toutes les valeurs de la liste</p></td></tr><tr><td></td><td><p>On répète jusqu’à ce que la</p><p>condition soit fausse (peut ne pas</p><p>être répété)</p></td></tr><tr><td></td><td></td></tr></table><h3 class="heading 3" id="4.1.4">Les instructions de base</h3><table><tr><td><p><span><b>Instruction</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p><span class="script">{{</span><span class="script"><i>ma_variable1</i></span><span class="script">}}</span></p></td><td><p>Appeler une variable Python passée en retour dans le contexte (interpolation)</p></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table><h3 class="heading 3" id="4.1.5">Les balises et filtres de gabarit intégrés</h3><p>https://docs.djangoproject.com/fr/5.2/ref/templates/builtins/#std-templatetag-csrf_token</p><h4 class="heading 4" id="4.1.5.1">Static</h4><p><br/></p><h1 class="heading 1" id="5">Le Framework côté CSS</h1><p><br/></p><h1 class="heading 1" id="6">Les fichiers de configurations</h1><p>Les fichiers de configurations se trouvent dans le dossier portant généralement le nom du projet</p><h2 class="heading 2" id="6.1">Le fichier settings.py</h2><h3 class="heading 3" id="6.1.1">Configurations de base</h3><table><tr><td><p><span><b>Paramètre</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td></td><td></td></tr><tr><td><p><span class="script">APPEND_SLASH = </span><span class="script">True</span></p></td><td><p>Ajouter automatiquement un / à la fin d’une url s’il n’est pas spécifié</p></td></tr><tr><td><p><span class="script">LANGUAGE_CODE = '</span><span class="script">fr-FR</span><span class="script">'</span></p></td><td><p>Passer le projet en Français</p></td></tr><tr><td><p><span class="script">TIME_ZONE = 'UTC'</span></p></td><td><p>Changer le fuseau horaire</p></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table><h3 class="heading 3" id="6.1.2">Les bases de données</h3><h4 class="heading 4" id="6.1.2.1">Syntaxe</h4><p><span class="script">DATABASES = {</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;'default</span><span class="script">':</span><span class="script"> {</span><span class="script"><br/>
</span><span class="script">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'ENGINE': '</span><span class="script"><i>mon_engine</i></span><span class="script">', </span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'NAME': BASE_DIR / 'db.sqlite3',</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'HOST': '</span><span class="script"><i>url</i></span><span class="script">',</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'PORT': '</span><span class="script"><i>port</i></span><span class="script">',</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'USER': '</span><span class="script"><i>nom_utilisateur</i></span><span class="script">',</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'PASSWORD': '</span><span class="script">mot_de_passe</span><span class="script">', </span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}</span><span class="script"><br/>
}</span></p><p class="note">À venir : Comment éviter de stocker en dur un mot de passe</p><h4 class="heading 4" id="6.1.2.2">Bases de données possibles</h4><table><tr><td><p><span><b>Technologie</b></span></p></td><td><p><span><b>Engine</b></span></p></td></tr><tr><td><p>SQLite (pas besoin de spécifier USER, PASSWORD et HOST</p></td><td><p><span class="script">django</span><span class="script">.db.backends.sqlite3</span></p></td></tr><tr><td><p>PostreSQL</p></td><td><p><span class="script">django</span><span class="script">.db.backends.postgresql</span></p></td></tr><tr><td><p>MySQL</p></td><td><p><span class="script">django</span><span class="script">.db.backends.mysql</span></p></td></tr><tr><td><p>SQL Oracle Database</p></td><td><p><span class="script">django</span><span class="script">.db.backends.oracle</span></p></td></tr></table><h1 class="heading 1" id="7">Les applications Django</h1><p>Les applications Django sont installées dans le fichier settings.py</p><h2 class="heading 2" id="7.1">Syntaxe</h2><p><span class="script">INSTALLED_APPS = [</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;'</span><span class="script"><i>application_django1</i></span><span class="script">',</span><span class="script"><br/>
&nbsp;&nbsp;&nbsp;&nbsp;'</span><span class="script"><i>application_django2</i></span><span class="script">'…</span></p><p><span class="script">]</span></p><h2 class="heading 2" id="7.2">Les différentes applications</h2><table><tr><td><p><span><b>Application</b></span></p></td><td><p><span><b>Installation</b></span></p></td></tr><tr><td><p>Installer sa propre application</p></td><td><p><span class="script">'</span><span class="script"><i>mon_application</i></span><span class="script">'</span></p></td></tr><tr><td><p>Django Admin</p></td><td><p><span class="script">'</span><span class="script">django.contrib</span><span class="script">.admin</span><span class="script">'</span></p></td></tr><tr><td><p>Système d’authentification</p></td><td><p><span class="script">'</span><span class="script">django.contrib</span><span class="script">.auth</span><span class="script">'</span></p></td></tr><tr><td><p>Structure pour les types de contenu (content types)</p></td><td><p><span class="script">'</span><span class="script">django.contrib</span><span class="script">.contenttypes</span><span class="script">'</span></p></td></tr><tr><td><p>Cadre pour les sessions</p></td><td><p><span class="script">'</span><span class="script">django.contrib</span><span class="script">.sessions</span><span class="script">'</span></p></td></tr><tr><td><p>Cadre pour l’envoi de messages</p></td><td><p><span class="script">'</span><span class="script">django.contrib</span><span class="script">.messages</span><span class="script">'</span></p></td></tr><tr><td><p>Structure pour la prise en charge des fichiers statiques</p></td><td><p><span class="script">'</span><span class="script">django.contrib</span><span class="script">.staticfiles</span><span class="script">'</span></p></td></tr><tr><td><p>Django REST Framework</p></td><td><p><span class="script">'</span><span class="script">rest_framework</span><span class="script">'</span></p></td></tr></table><h2 class="heading 2" id="7.3">Authentification (django.contrib.auth)</h2><h2 class="heading 2" id="7.4">Gestion des permissions (django.contrib.contenttypes)</h2><h1 class="heading 1" id="8">Les middlewares</h1><h2 class="heading 2" id="8.1">Les middlewares Django</h2><table><tr><td><p><span><b>Middlewares</b></span></p></td><td><p><span><b>Description</b></span></p></td></tr><tr><td><p>SessionMiddleware</p></td><td><p>Gérer les sessions tout au long des requêtes (utile pour l’application d’authentification)</p></td></tr><tr><td><p>AuthenticationMiddleware</p></td><td><p>Associer les utilisateurs aux requêtes en utilisant les sessions (utile pour l’application d’authentification)</p></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table>
			</article>
		</main>
		<footer>
			<script src="../../scripts/footer.js"></script>
			<a class="top" href="#"><img src="../../images/top.png"></a>
		</footer>
		<script src="../../scripts/script.js"></script>
		<script src="../../scripts/tableDesMatieres.js"></script>
	</body>
</html>
